<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HelloWei</title>
  
  
  <link href="https://blog.hellowei.ga/atom.xml" rel="self"/>
  
  <link href="https://blog.hellowei.ga/"/>
  <updated>2022-09-03T08:13:28.155Z</updated>
  <id>https://blog.hellowei.ga/</id>
  
  <author>
    <name>ä¸åƒè¥¿æŸš</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Installation_on_Archlinux</title>
    <link href="https://blog.hellowei.ga/2022/09/03/Installation-on-Archlinux/"/>
    <id>https://blog.hellowei.ga/2022/09/03/Installation-on-Archlinux/</id>
    <published>2022-09-03T05:04:49.000Z</published>
    <updated>2022-09-03T08:13:28.155Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€">å‰è¨€</h3><p>æœ¬æ–‡ä¸»è¦è®²è¿°archlinuxå¸¸ç”¨çš„åŒ…ç®¡ç†å’Œå’Œå¯¹äºappçš„å®‰è£…æ–¹æ³•ã€‚ArchlinuxåŒ…ç®¡ç†è½¯ä»¶ä¸»è¦ç”±Pacmanä»¥åŠAURæä¾›</p><h3 id="Pacman">Pacman</h3><p><a href="https://wiki.archlinux.org/title/pacman">Pacman</a>æ˜¯Archä¸‹å®˜æ–¹çš„åŒ…ç®¡ç†è½¯ä»¶ï¼Œæ‰€æœ‰èƒ½å¤Ÿé€šè¿‡pacmanä¸‹è½½å®‰è£…ï¼Œè¢«çº³å…¥å®˜æ–¹è½¯ä»¶åŒ…åˆ—è¡¨çš„è½¯ä»¶ï¼Œéƒ½å¯ä»¥åœ¨<a href="https://archlinux.org/packages/">Arch Pachages</a>æ‰¾åˆ°</p><ol><li><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S &lt;package-name&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°/å‡çº§</p><p>æ›´æ–°AUR è½¯ä»¶åŒ…æ•°æ®åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Syy</span><br></pre></td></tr></table></figure><p>æ›´æ–° AUR è½¯ä»¶åŒ…æ•°æ®åº“å¹¶å‡çº§æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…(åŒ…æ‹¬å†…æ ¸ï¼Œå°å¿ƒé£æ»šè‰ğŸ˜ˆï¸)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Syyu</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ -S è¡¨ç¤º syncï¼ˆåŒæ­¥ï¼‰ï¼Œ-y è¡¨ç¤ºä»æœåŠ¡å™¨ä¸‹è½½æ–°çš„è½¯ä»¶åŒ…æ•°æ®åº“ï¼Œ-yy è¡¨ç¤ºå¼ºåˆ¶æ›´æ–°è½¯ä»¶åŒ…æ•°æ®åº“,-u è¡¨ç¤º upgradeï¼ˆå‡çº§</p></li><li><p>å¸è½½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman --Rscnu &lt;package-name&gt;</span><br></pre></td></tr></table></figure><p>-R è¡¨ç¤º Removeï¼ˆç§»é™¤ï¼‰ï¼Œ-s åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–å…³ç³»ï¼Œ-cï¼ˆcascadeï¼‰åˆ é™¤è½¯ä»¶åŒ…åŠæ‰€æœ‰ä¾èµ–äºæ­¤çš„è½¯ä»¶åŒ…ï¼Œ-n è¡¨ç¤º nosaveï¼ˆåˆ é™¤é…ç½®æ–‡ä»¶ï¼‰ï¼Œ-u è¡¨ç¤º unneeded</p></li><li><p>æœç´¢</p><p>åœ¨çº¿æœç´¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Ss &lt;key-word&gt;</span><br></pre></td></tr></table></figure><p>æœ¬åœ°æœç´¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Qs &lt;key-word&gt; <span class="comment">#æ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line">sudo pacman -Q &lt;package-name&gt; <span class="comment">#ç²¾ç¡®åŒ¹é… </span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æœ¬åœ°è½¯ä»¶åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -U &lt;package-path&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¸…ç†æ— ç”¨è½¯ä»¶åŒ…å’Œç¼“å­˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   sudo pacman -Scc</span><br><span class="line"></span><br><span class="line"><span class="comment">### AUR</span></span><br><span class="line"></span><br><span class="line">[Aur](https://aur.archlinux.org/)æ˜¯Arch ç”¨æˆ·è½¯ä»¶ä»“åº“ï¼Œå…¨ç§° Arch User-community Repositoryï¼ŒAUR æ˜¯ä¸ºç”¨æˆ·è€Œå»ºã€ç”±ç”¨æˆ·ä¸»å¯¼çš„ Arch è½¯ä»¶ä»“åº“.</span><br><span class="line"></span><br><span class="line">å¾ˆå¤šè½¯ä»¶ä»gitåˆ°ç¼–è¯‘åˆ°å®‰è£…åŸºæœ¬ä¸Šéƒ½æ˜¯ç›¸åŒçš„æ­¥éª¤ï¼Œå°†è¿™ä¸ªè¿‡ç¨‹æ‰“åŒ…æˆäº†ä¸€ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬åªéœ€è¦gitä¸‹æ¥è¿™ä¸ªè„šæœ¬ï¼Œå³å¯å®Œæˆè½¯ä»¶çš„è‡ªåŠ¨åŒ–å®‰è£…</span><br><span class="line"></span><br><span class="line">æœ‰æ—¶å€™AUR helperæ²¡æœ‰ç”¨å°±æ‰‹åŠ¨è¯•è¯•å§ï¼</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">git <span class="built_in">clone</span> &lt;aur repo&gt; <span class="comment"># åœ¨æ‹‰å–ä»“åº“</span></span><br><span class="line"><span class="built_in">cd</span> &lt;repo&gt;</span><br><span class="line">makepkg <span class="comment">#æ‰§è¡ŒPKGBUILDè„šæœ¬ä¸­çš„å†…å®¹ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å&quot;.xz&quot;ç»“å°¾çš„äºŒè¿›åˆ¶å®‰è£…æ–‡ä»¶</span></span><br><span class="line">sudo pacman -U &lt;pkg&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="yay">yay</h3><p>yayæ˜¯æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€å¼€å‘çš„ AUR Helperï¼Œå…·æœ‰é«˜çº§ä¾èµ–è§£å†³ã€PKGBUILD ä¸‹è½½ã€AUR åŒ…åè‡ªåŠ¨è¡¥å…¨ã€ç§»é™¤ç”Ÿæˆä¾èµ–ç­‰åŠŸèƒ½ï¼Œä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è¿›è¡Œ<code>git clone</code>,<code>makepkg</code>,<code>pacman -U</code>ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œè§£æ”¾åŒæ‰‹ï¼Œç±»ä¼¼äºpacman</p><ol><li><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S &lt;package-name&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°/å‡çº§</p><p>æ›´æ–°AUR è½¯ä»¶åŒ…æ•°æ®åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -Syy</span><br></pre></td></tr></table></figure><p>æ›´æ–° AUR è½¯ä»¶åŒ…æ•°æ®åº“å¹¶å‡çº§æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -Syyu</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ -S è¡¨ç¤º syncï¼ˆåŒæ­¥ï¼‰ï¼Œ-y è¡¨ç¤ºä»æœåŠ¡å™¨ä¸‹è½½æ–°çš„è½¯ä»¶åŒ…æ•°æ®åº“ï¼Œ-yy è¡¨ç¤ºå¼ºåˆ¶æ›´æ–°è½¯ä»¶åŒ…æ•°æ®åº“,-u è¡¨ç¤º upgradeï¼ˆå‡çº§</p></li><li><p>å¸è½½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay --Rscnu &lt;package-name&gt;</span><br></pre></td></tr></table></figure><p>-R è¡¨ç¤º Removeï¼ˆç§»é™¤ï¼‰ï¼Œ-s åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–å…³ç³»ï¼Œ-cï¼ˆcascadeï¼‰åˆ é™¤è½¯ä»¶åŒ…åŠæ‰€æœ‰ä¾èµ–äºæ­¤çš„è½¯ä»¶åŒ…ï¼Œ-n è¡¨ç¤º nosaveï¼ˆåˆ é™¤é…ç½®æ–‡ä»¶ï¼‰ï¼Œ-u è¡¨ç¤º unneeded</p></li><li><p>æœç´¢</p><p>åœ¨çº¿æœç´¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -Ss &lt;key-word&gt;</span><br></pre></td></tr></table></figure><p>æœ¬åœ°æœç´¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yay -Qs &lt;key-word&gt; <span class="comment">#æ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line">yay -Q &lt;package-name&gt; <span class="comment">#ç²¾ç¡®åŒ¹é… </span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æœ¬åœ°è½¯ä»¶åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -U &lt;package-path&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¸…ç†æ— ç”¨è½¯ä»¶åŒ…å’Œç¼“å­˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -Scc</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²è¿°archlinuxå¸¸ç”¨çš„åŒ…ç®¡ç†å’Œå’Œå¯¹äºappçš„å®‰è£…æ–¹æ³•ã€‚ArchlinuxåŒ…ç®¡ç†è½¯ä»¶ä¸»è¦ç”±Pacmanä»¥åŠAURæä¾›&lt;/p&gt;
&lt;h3 id=&quot;Pacman&quot;&gt;Pacman&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://</summary>
      
    
    
    
    
    <category term="Archlinux" scheme="https://blog.hellowei.ga/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxç»Ÿè®¡æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ•°é‡</title>
    <link href="https://blog.hellowei.ga/2022/08/16/Linux%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9%E6%95%B0%E9%87%8F/"/>
    <id>https://blog.hellowei.ga/2022/08/16/Linux%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9%E6%95%B0%E9%87%8F/</id>
    <published>2022-08-16T13:34:42.496Z</published>
    <updated>2022-08-16T13:34:42.496Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹å†…å®¹æ‘˜è‡ª<a href="http://noahsnail.com/2017/02/07/2017-02-07-Linux%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%E6%95%B0%E7%9B%AE/">Tyan</a>,æ–¹ä¾¿åç»­è‡ªå·±æŸ¥è¯¢ä½¿ç”¨ï¼Œæ„Ÿè°¢ä½œè€…</p><h3 id="ç»Ÿè®¡å‘½ä»¤">ç»Ÿè®¡å‘½ä»¤</h3><p>Linuxä¸‹æœ‰ä¸‰ä¸ªå‘½ä»¤:<code>ls</code>,<code>grep</code>,<code>wc</code>ã€‚é€šè¿‡è¿™ä¸‰ä¸ªå‘½ä»¤çš„ç»„åˆå¯å®ç°ç»Ÿè®¡ç›®å½•ä¸‹æ–‡ä»¶åŠæ–‡ä»¶å¤¹çš„ä¸ªæ•°ã€‚</p><ol><li><p>ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ–‡ä»¶ä¸ªæ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l | grep &quot;^-&quot; | wc -l</span><br></pre></td></tr></table></figure></li><li><p>ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lR| grep &quot;^-&quot; | wc -l</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æŸç›®å½•ä¸‹æ–‡ä»¶å¤¹(ç›®å½•)çš„ä¸ªæ•°ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lR | grep &quot;^d&quot; | wc -l</span><br></pre></td></tr></table></figure></li></ol><h3 id="å‘½ä»¤è¯¦è§£">å‘½ä»¤è¯¦è§£</h3><ul><li><p><code>ls -l</code></p><p>é•¿åˆ—è¡¨è¾“å‡ºè¯¥ç›®å½•ä¸‹æ–‡ä»¶ä¿¡æ¯(æ³¨æ„è¿™é‡Œçš„æ–‡ä»¶æ˜¯æŒ‡ç›®å½•ã€é“¾æ¥ã€è®¾å¤‡æ–‡ä»¶ç­‰)ï¼Œæ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œ<code>ls -lR</code>æ˜¯åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬å­ç›®å½•ã€‚</p></li><li><p><code>grep &quot;^-&quot;</code></p><p>è¿‡æ»¤<code>ls</code>çš„è¾“å‡ºä¿¡æ¯ã€‚æ­£åˆ™è¡¨è¾¾å¼&quot;^-&quot;è¡¨ç¤ºä»¥<code>-</code>å¼€å¤´ï¼Œå› ä¸ºç»Ÿè®¡æ–‡ä»¶å¤¹æ”¹ä¸º<code>^d</code></p></li><li><p><code>wc -l</code></p><p>ç»Ÿè®¡è¾“å‡ºä¿¡æ¯çš„è¡Œæ•°ï¼Œç»Ÿè®¡ç»“æœå°±æ˜¯è¾“å‡ºä¿¡æ¯çš„è¡Œæ•°ï¼Œä¸€è¡Œä¿¡æ¯å¯¹åº”ä¸€ä¸ªæ–‡ä»¶</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»¥ä¸‹å†…å®¹æ‘˜è‡ª&lt;a href=&quot;http://noahsnail.com/2017/02/07/2017-02-07-Linux%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E</summary>
      
    
    
    
    <category term="Linux" scheme="https://blog.hellowei.ga/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>C++ priority_queueä½¿ç”¨æ–¹æ³•</title>
    <link href="https://blog.hellowei.ga/2022/02/26/priority-queue%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>https://blog.hellowei.ga/2022/02/26/priority-queue%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</id>
    <published>2022-02-26T10:58:37.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¼˜å…ˆé˜Ÿåˆ—priority-queue">ä¼˜å…ˆé˜Ÿåˆ—priority_queue</h2><p>priority_queueæ˜¯C++æä¾›çš„ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå®šä¹‰åœ¨å¤´æ–‡ä»¶<code>&lt;queue&gt;</code>ä¸­ï¼Œé»˜è®¤ä¸ºæœ€å¤§ä¼˜å…ˆé˜Ÿåˆ—<br>å®šä¹‰å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">T</span>,</span></span><br><span class="line"><span class="class">    <span class="keyword">class</span> <span class="title">Container</span> =</span> std::vector&lt;T&gt;,</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Compare</span> =</span> std::less&lt;<span class="keyword">typename</span> Container::value_type&gt;</span><br><span class="line">&gt; <span class="class"><span class="keyword">class</span> <span class="title">priority_queue</span>;</span></span><br></pre></td></tr></table></figure><h3 id="æ¨¡æ¿å½¢å‚">æ¨¡æ¿å½¢å‚</h3><ul><li><p>T å­˜å‚¨å…ƒç´ ç±»å‹</p></li><li><p>Container ç”¨äºå­˜å‚¨å…ƒç´ çš„åº•å±‚å®¹å™¨ å¦‚<code>std::vector&lt;T&gt;</code>,<code>std::vector&lt;std::vector&lt;T&gt; &gt;</code>,ä¹Ÿå°±æ˜¯å®¹å™¨çš„ç±»å‹ï¼Œ</p></li><li><p>Compare ä¸¥æ ¼å¼±åºçš„<a href="https://zh.cppreference.com/w/cpp/named_req/Compare"><em>æ¯”è¾ƒ</em> <em>(Compare)</em> </a>ç±»å‹</p><p>å¯¹äºè‡ªå®šä¹‰çš„compareå‡½æ•°ï¼Œéœ€æä¾›ä¸¥æ ¼å¼±åºã€‚å¯¹äºæ¯”è¾ƒå‡½æ•°ï¼Œè‹¥è¿”å›true,è¯´æ˜left â€œå°äºâ€ right<br>æ¯”è¾ƒæ—¶ï¼Œè‹¥è¦å·¦æ“ä½œæ•°å…ˆäºå³æ“ä½œæ•°å¼¹å‡ºï¼Œåˆ™åº”è¯¥è¿”å›falseã€‚(å› ä¸ºpriority_queueæ€»æ˜¯è¿”å›**â€œæœ€å¤§â€**çš„)ï¼Œè‹¥è¦å³æ“ä½œæ•°å…ˆå¼¹å‡ºï¼Œåˆ™åº”è¯¥è¿”å›true</p></li></ul><h3 id="å¸¸ç”¨æˆå‘˜å‡½æ•°">å¸¸ç”¨æˆå‘˜å‡½æ•°</h3><table><thead><tr><th>æˆå‘˜å‡½æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>top</td><td>è®¿é—®æ ˆé¡¶å…ƒç´ </td></tr><tr><td>empty</td><td>æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</td></tr><tr><td>size</td><td>è¿”å›å®¹çº³çš„å…ƒç´ æ•°</td></tr><tr><td>push</td><td>æ’å…¥å…ƒç´ ï¼Œå¹¶å¯¹åº•å±‚å®¹å™¨æ’åº(è‡ªåŠ¨å®Œæˆ)</td></tr><tr><td>pop</td><td>å¼¹å‡ºé˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>emplace</td><td>åŸä½æ„é€ å…ƒç´ å¹¶æ’åºåº•å±‚å®¹å™¨</td></tr><tr><td>swap</td><td>äº¤æ¢å†…å®¹</td></tr></tbody></table><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p>å¦‚ä¸ç‰¹æ®Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">void</span> <span class="title">print_queue</span><span class="params">(T&amp; q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; q.<span class="built_in">top</span>() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç®€å•ä½¿ç”¨(å¤§é¡¶å †)</span></span><br><span class="line"><span class="comment">//è¿™é‡Œé»˜è®¤ä½¿ç”¨äº†std::less&lt;T&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¿å‡½æ•°ç±»ï¼Œé‡è½½äº†()æ“ä½œç¬¦</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">constexpr bool operator()(const T &amp;lhs, const T &amp;rhs) const </span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    return lhs &lt; rhs; </span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">std::priority_queue&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n : &#123;<span class="number">1</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">2</span>&#125;)&#123;</span><br><span class="line">q.<span class="built_in">push</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print_queue</span>(q);</span><br><span class="line"><span class="comment">//è¾“å‡º 9 8 7 6 5 4 3 2 1 0 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°é¡¶å †</span></span><br><span class="line">std::priority_queue&lt;<span class="keyword">int</span>, std::vector&lt;<span class="keyword">int</span>&gt;, std::greater&lt;<span class="keyword">int</span>&gt; &gt; q2;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n : &#123;<span class="number">1</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">2</span>&#125;)</span><br><span class="line">        q2.<span class="built_in">push</span>(n);</span><br><span class="line"><span class="built_in">print_queue</span>(q2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡º 0 1 2 3 4 5 6 7 8 9</span></span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</p><p>è¿™é‡Œä½¿ç”¨<code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>ä½œä¸ºåº•å±‚å®¹å™¨ï¼ŒæŒ‰äºŒå…ƒç»„std::vector<int>ç¬¬ä¸€ä¸ªåæ ‡ä»å°åˆ°å¤§æ’åºï¼Œè‹¥ç›¸åŒåˆ™ç¬¬äºŒä¸ªåæ ‡ä»å°åˆ°å¤§æ’åº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">void</span> <span class="title">print_queue</span><span class="params">(T&amp; q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">auto</span> temp = q.<span class="built_in">top</span>();</span><br><span class="line">        std::cout &lt;&lt; temp[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span>&lt;&lt;temp[<span class="number">1</span>]&lt;&lt;std::endl;</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šä¹‰æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">//å¯¹äºæ¯”è¾ƒå‡½æ•°ï¼Œè‹¥è¿”å›true,è¯´æ˜leftæ˜¯â€œå°äºâ€ rightçš„ï¼Œ</span></span><br><span class="line"><span class="comment">//priority_queueæ€»æ˜¯è¿”å›â€œæœ€å¤§â€çš„ï¼Œrightå°±ä¼šä¼˜å…ˆè¢«å¼¹å‡º</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> cmp = [](std::vector&lt;<span class="keyword">int</span>&gt; left, std::vector&lt;<span class="keyword">int</span>&gt; right) &#123; </span><br><span class="line">        <span class="keyword">if</span>(left[<span class="number">0</span>] == right[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">return</span> left[<span class="number">0</span>] &gt; right[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">return</span> left[<span class="number">0</span>] &gt; right[<span class="number">0</span>];</span><br><span class="line">    &#125;;</span><br><span class="line">    std::priority_queue&lt;std::vector&lt;<span class="keyword">int</span>&gt;, std::vector&lt;std::vector&lt;<span class="keyword">int</span>&gt;&gt;, <span class="keyword">decltype</span>(cmp)&gt; <span class="built_in">q3</span>(cmp);</span><br><span class="line">    std::vector&lt;std::vector&lt;<span class="keyword">int</span>&gt;&gt; arr&#123;&#123;<span class="number">3</span>,<span class="number">4</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">5</span>,<span class="number">7</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>&#125;,&#123;<span class="number">9</span>,<span class="number">4</span>&#125;,&#123;<span class="number">4</span>,<span class="number">2</span>&#125;,&#123;<span class="number">3</span>,<span class="number">5</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; n :arr)&#123;</span><br><span class="line">        q3.<span class="built_in">push</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print_queue</span>(q3);;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1 3</span></span><br><span class="line"><span class="comment">1 5</span></span><br><span class="line"><span class="comment">3 5</span></span><br><span class="line"><span class="comment">3 4</span></span><br><span class="line"><span class="comment">4 2</span></span><br><span class="line"><span class="comment">5 7</span></span><br><span class="line"><span class="comment">9 4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¼˜å…ˆé˜Ÿåˆ—priority-queue&quot;&gt;ä¼˜å…ˆé˜Ÿåˆ—priority_queue&lt;/h2&gt;
&lt;p&gt;priority_queueæ˜¯C++æä¾›çš„ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå®šä¹‰åœ¨å¤´æ–‡ä»¶&lt;code&gt;&amp;lt;queue&amp;gt;&lt;/code&gt;ä¸­ï¼Œé»˜è®¤ä¸ºæœ€å¤§ä¼˜å…ˆé˜Ÿåˆ—&lt;br&gt;
å®šä¹‰å¦‚ä¸‹&lt;/p&gt;
&lt;f</summary>
      
    
    
    
    
    <category term="C++" scheme="https://blog.hellowei.ga/tags/C/"/>
    
    <category term="priority_queue" scheme="https://blog.hellowei.ga/tags/priority-queue/"/>
    
  </entry>
  
  <entry>
    <title>C++11éšæœºæ•°</title>
    <link href="https://blog.hellowei.ga/2022/02/25/%E9%9A%8F%E6%9C%BA%E6%95%B0/"/>
    <id>https://blog.hellowei.ga/2022/02/25/%E9%9A%8F%E6%9C%BA%E6%95%B0/</id>
    <published>2022-02-25T11:51:13.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="c-11-ä¼ªéšæœºæ•°ç”Ÿæˆ">c++11 ä¼ªéšæœºæ•°ç”Ÿæˆ</h2><p>c++11 éšæœºæ•°åº“<code>&lt;random&gt;</code>æä¾›ç”Ÿæˆéšæœºæ•°å’Œä¼ªéšæœºæ•°çš„ç±»ï¼Œ<br>ä¸ºç”Ÿæˆä¼ªéšæœºæ•°ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ç±»</p><ol><li>å‡åŒ€éšæœºä½ç”Ÿæˆå™¨(URBG)ï¼ŒåŒ…å«éšæœºæ•°å¼•æ“ï¼Œå®ƒä»¬æ˜¯ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œæ˜¯èƒ½å¤Ÿç”Ÿæˆå‡åŒ€åˆ†å¸ƒæ•´æ•°åºåˆ—çš„ä¼ªéšæœºæ•°</li><li>éšæœºæ•°åˆ†å¸ƒ(ä¾‹å¦‚å‡åŒ€åˆ†å¸ƒï¼Œæ­£æ€åˆ†å¸ƒå’Œæ³Šæ¾åˆ†å¸ƒç­‰)ï¼Œå®ƒä»¬å°† URBG çš„è¾“å‡ºè½¬æ¢ä¸ºå„ç§ç»Ÿè®¡åˆ†å¸ƒ<br>å‡åŒ€éšæœºä½ç”Ÿæˆå™¨å’Œéšæœºæ•°åˆ†å¸ƒç›¸äº’ä½¿ç”¨ã€‚æ‰€æœ‰éšæœºæ•°å¼•æ“éƒ½å¯ä»¥æŒ‡å®šåœ°æ’­ç§ã€åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä»¥ç”¨äºå¯é‡å¤çš„æ¨¡æ‹Ÿå™¨</li></ol><h3 id="å‡åŒ€éšæœºä½ç”Ÿæˆå™¨">å‡åŒ€éšæœºä½ç”Ÿæˆå™¨</h3><p>å‡åŒ€éšæœºä½ç”Ÿæˆå™¨æ˜¯<strong>å‡½æ•°å¯¹è±¡(ä»¿å‡½æ•°ç±»)</strong>ï¼Œå®ƒè¿”å›æ— ç¬¦å·æ•´æ•°å€¼ï¼Œå¹¶ä½¿å¾—æ¯ä¸ªå€¼åœ¨å¯èƒ½ç»“æœçš„èŒƒå›´ä¸­æ‹¥æœ‰ï¼ˆç†æƒ³ä¸Šï¼‰ç›¸ç­‰çš„è¢«è¿”å›æ¦‚ç‡<br>ä¸»è¦æœ‰ä»¥ä¸‹4ç§,</p><ol><li>éšæœºæ•°å¼•æ“<br>éšæœºæ•°å¼•æ“æœ¬è´¨æ˜¯ä¸€ç§ç®—æ•°ç®—æ³•ï¼Œå› æ­¤ç›¸åŒçš„ç§å­å¤šæ¬¡è°ƒç”¨äº§ç”Ÿçš„éšæœºæ•°æ˜¯å®Œå…¨ç›¸åŒçš„<br>æ ‡å‡†æä¾›ä¸‰ç§å¸¸ç”¨çš„å¼•æ“ï¼šlinear_congruential_engineï¼Œmersenne_twister_engine å’Œ subtract_with_carry_engineã€‚ç¬¬ä¸€ç§æ˜¯çº¿æ€§åŒä½™ç®—æ³•ï¼Œç¬¬äºŒç§æ˜¯æ¢…æ£®æ—‹è½¬ç®—æ³•ï¼Œç¬¬ä¸‰ç§å¸¦è¿›ä½çš„çº¿æ€§åŒä½™ç®—æ³•ã€‚</li><li>éšæœºæ•°å¼•æ“é€‚é…å™¨<br>éšæœºæ•°å¼•æ“é€‚é…å™¨ç”Ÿæˆä»¥å¦ä¸€éšæœºæ•°å¼•æ“ä¸ºç†µæºçš„ä¼ªéšæœºæ•°</li><li>é¢„å®šä¹‰éšæœºæ•°ç”Ÿæˆå™¨<br>å…·ä½“è§<a href="!https://zh.cppreference.com/w/cpp/numeric/random">ä¼ªéšæœºæ•°ç”Ÿæˆ</a><br>å¸¸ç”¨çš„æœ‰default_random_engineï¼Œmt19937ï¼Œminstd_rand0ç­‰</li><li>éç¡®å®šéšæœºæ•°ç”Ÿæˆå™¨<br>ä½¿ç”¨ç¡¬ä»¶ç†µæºçš„éç¡®å®šéšæœºæ•°ç”Ÿæˆå™¨<br>std::random_device</li></ol><p>ä½¿ç”¨æ–¹æ³•<br>æ­£å¸¸ä½¿ç”¨æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨é¢„å®šä¹‰éšæœºæ•°ç”Ÿæˆå™¨æˆ–è€…éç¡®å®šéšæœºæ•°å³å¯<br>éšæœºæ•°å¼•æ“æ¥å—ä¸€ä¸ªæ•´å½¢å‚æ•°å½“ä½œç§å­ï¼Œä¸æä¾›çš„è¯ï¼Œä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚å¦‚æœæƒ³å¤šæ¬¡è¿è¡Œäº§ç”Ÿç›¸åŒçš„éšæœºæ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¡®å®šçš„æ•°ä½œä¸ºç§å­ã€‚å¦‚æœæ˜¯æƒ³æ¯æ¬¡è¿è¡Œç”Ÿæˆä¸ä¸€æ ·çš„éšæœºæ•°ï¼ŒLinux æ¨èä½¿ç”¨ random_device æ¥äº§ç”Ÿä¸€ä¸ªéšæœºæ•°å½“ä½œç§å­ï¼Œwindows äº§ç”Ÿä¸€ä¸ªä¼ªéšæœºæ•°ä½œä¸ºç§å­ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//é€‰æ‹©æŸä¸€ç§éšæœºæ•°ç”Ÿæˆå™¨æˆ–è€…</span></span><br><span class="line">    std::random_device rd;  <span class="comment">//ä½¿ç”¨ç¡¬ä»¶ç†µæº</span></span><br><span class="line">    <span class="comment">//å°†rdç”Ÿæˆçš„éç¡®å®šéšæœºæ•°ä½œä¸ºéšæœºæ•°å¼•æ“çš„ç§å­ï¼Œå½“ç„¶è‡ªå®šä¹‰ä¹Ÿè¡Œï¼Œç›¸åŒçš„ç§å­å¤šæ¬¡è°ƒç”¨äº§ç”Ÿçš„éšæœºæ•°æ˜¯å®Œå…¨ç›¸åŒ</span></span><br><span class="line">    <span class="function">std::default_random_engine <span class="title">e</span><span class="params">(rd())</span></span>;</span><br><span class="line">    <span class="comment">//ç”Ÿæˆ10ä¸ªéšæœºæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">        std::cout&lt;&lt;<span class="built_in">e</span>()&lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éšæœºæ•°åˆ†å¸ƒ">éšæœºæ•°åˆ†å¸ƒ</h3><p>éšæœºæ•°åˆ†å¸ƒåå¤„ç† URBG çš„è¾“å‡ºï¼Œä»¥ä½¿å¾—è¾“å‡ºç»“æœæŒ‰ç…§å®šä¹‰çš„ç»Ÿè®¡æ¦‚ç‡å¯†åº¦å‡½æ•°åˆ†å¸ƒ<br>å…·ä½“é—´<a href="https://zh.cppreference.com/w/cpp/numeric/random">éšæœºæ•°åˆ†å¸ƒ</a>ä¸­æä¾›çš„ç±»ï¼Œå¸¸è§çš„æœ‰å‡åŒ€ï¼Œæ­£æ€ç­‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ä»¥éšæœºå€¼æ’­ç§ï¼Œè‹¥å¯èƒ½</span></span><br><span class="line">    std::random_device r;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// é€‰æ‹© 1 ä¸ 6 é—´çš„éšæœºæ•°</span></span><br><span class="line">    <span class="function">std::default_random_engine <span class="title">e1</span><span class="params">(r())</span></span>;</span><br><span class="line">    <span class="function">std::uniform_int_distribution&lt;<span class="keyword">int</span>&gt; <span class="title">uniform_dist</span><span class="params">(<span class="number">1</span>, <span class="number">6</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> mean = <span class="built_in">uniform_dist</span>(e1);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Randomly-chosen mean: &quot;</span> &lt;&lt; mean &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€¼æœ€å¯èƒ½æ¥è¿‘å¹³å‡</span></span><br><span class="line">    <span class="comment">// æ ‡å‡†å·®å½±å“ç”Ÿæˆçš„å€¼è·ç¦»å¹³å‡æ•°çš„åˆ†æ•£</span></span><br><span class="line">    std::random_device rd;</span><br><span class="line">    <span class="function">std::mt19937 <span class="title">gen</span><span class="params">(rd())</span></span>;</span><br><span class="line">    std::normal_distribution&lt;&gt; d&#123;<span class="number">5</span>,<span class="number">2</span>&#125;;</span><br><span class="line">    std::map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; hist&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n=<span class="number">0</span>; n&lt;<span class="number">10000</span>; ++n) &#123;</span><br><span class="line">        ++hist[std::<span class="built_in">round</span>(<span class="built_in">d</span>(gen))];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> p : hist) &#123;</span><br><span class="line">        std::cout &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">2</span>)</span><br><span class="line">                  &lt;&lt; p.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; std::<span class="built_in">string</span>(p.second/<span class="number">200</span>, <span class="string">&#x27;*&#x27;</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;c-11-ä¼ªéšæœºæ•°ç”Ÿæˆ&quot;&gt;c++11 ä¼ªéšæœºæ•°ç”Ÿæˆ&lt;/h2&gt;
&lt;p&gt;c++11 éšæœºæ•°åº“&lt;code&gt;&amp;lt;random&amp;gt;&lt;/code&gt;æä¾›ç”Ÿæˆéšæœºæ•°å’Œä¼ªéšæœºæ•°çš„ç±»ï¼Œ&lt;br&gt;
ä¸ºç”Ÿæˆä¼ªéšæœºæ•°ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ç±»&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡åŒ€éšæœºä½ç”Ÿæˆå™¨(URBG</summary>
      
    
    
    
    <category term="C++" scheme="https://blog.hellowei.ga/categories/C/"/>
    
    
    <category term="C++" scheme="https://blog.hellowei.ga/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>c++åˆ†å‰²å­—ç¬¦ä¸²</title>
    <link href="https://blog.hellowei.ga/2021/12/27/c-%E5%88%86%E5%89%B2%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>https://blog.hellowei.ga/2021/12/27/c-%E5%88%86%E5%89%B2%E5%AD%97%E7%AC%A6%E4%B8%B2/</id>
    <published>2021-12-27T03:05:43.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä½¿ç”¨stringstream-getline">ä½¿ç”¨stringstream + getline</h3><p>ä½¿ç”¨<a href="https://www.cplusplus.com/reference/string/string/getline/">getline</a>è¿›è¡Œåˆ†å‰²<br>å±€é™æ€§ï¼Œåªèƒ½ä»¥å•ä¸ªå­—ç¬¦ä½œä¸ºåˆ†å‰²çº¿</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">istringstream <span class="title">ss</span><span class="params">(<span class="string">&quot;helloahelloahello&quot;</span>)</span></span>;</span><br><span class="line">    string word;</span><br><span class="line">    <span class="keyword">char</span> delim = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">getline</span>(ss,word,delim))&#123;</span><br><span class="line">        cout&lt;&lt;word&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Output</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨std-string-find">ä½¿ç”¨std::string::find</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for string delimiter</span></span><br><span class="line"><span class="function">vector&lt;string&gt; <span class="title">split</span> <span class="params">(<span class="keyword">const</span> string&amp; s, <span class="keyword">const</span> string&amp; delimiter)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">size_t</span> pos_start = <span class="number">0</span>, pos_end, delim_len = delimiter.<span class="built_in">length</span>();</span><br><span class="line">    string token;</span><br><span class="line">    vector&lt;string&gt; res;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ((pos_end = s.<span class="built_in">find</span> (delimiter, pos_start)) != string::npos) &#123;</span><br><span class="line">        token = s.<span class="built_in">substr</span> (pos_start, pos_end - pos_start);</span><br><span class="line">        pos_start = pos_end + delim_len;</span><br><span class="line">        <span class="keyword">if</span>(!token.<span class="built_in">empty</span>())</span><br><span class="line">        res.<span class="built_in">push_back</span> (token);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(pos_start != s.<span class="built_in">size</span>())</span><br><span class="line">        res.<span class="built_in">push_back</span> (s.<span class="built_in">substr</span> (pos_start));</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string str = <span class="string">&quot;adsf-+qwret-+nvfkbdsj-+orthdfjgh-+dfjrleih&quot;</span>;</span><br><span class="line">    string delimiter = <span class="string">&quot;-+&quot;</span>;</span><br><span class="line">    vector&lt;string&gt; v = <span class="built_in">split</span> (str, delimiter);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : v) cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Output</span></span><br><span class="line"><span class="comment">adsf</span></span><br><span class="line"><span class="comment">qwret</span></span><br><span class="line"><span class="comment">nvfkbdsj</span></span><br><span class="line"><span class="comment">orthdfjgh</span></span><br><span class="line"><span class="comment">dfjrleih</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ä½¿ç”¨stringstream-getline&quot;&gt;ä½¿ç”¨stringstream + getline&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨&lt;a href=&quot;https://www.cplusplus.com/reference/string/string/getline/&quot;&gt;getl</summary>
      
    
    
    
    <category term="C++" scheme="https://blog.hellowei.ga/categories/C/"/>
    
    
    <category term="C++" scheme="https://blog.hellowei.ga/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>èƒŒåŒ…é—®é¢˜</title>
    <link href="https://blog.hellowei.ga/2021/12/23/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/"/>
    <id>https://blog.hellowei.ga/2021/12/23/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/</id>
    <published>2021-12-23T06:51:02.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/tianyicui/pack">èƒŒåŒ…ä¹è®²</a></p></blockquote><h2 id="0-1èƒŒåŒ…">0-1èƒŒåŒ…</h2><h3 id="é¢˜ç›®">é¢˜ç›®</h3><p>æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>ä»¶ç‰©å“å’Œæœ€å¤šæ‰¿è½½é‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>çš„èƒŒåŒ…ã€‚ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶ç‰©å“çš„é‡é‡æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä»·å€¼æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚<strong>æ¯ä»¶ç‰©å“åªèƒ½ç”¨ä¸€æ¬¡</strong>ï¼Œæ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…é‡Œç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚</p><h3 id="åŸºæœ¬æ€è·¯">åŸºæœ¬æ€è·¯</h3><p>ä½œä¸ºæœ€åŸºç¡€çš„èƒŒåŒ…é—®é¢˜ï¼Œå…¶ç‰¹ç‚¹æ˜¯<strong>æ¯ä»¶ç‰©å“æœ€å¤šç”¨ä¸€æ¬¡</strong><br>ç”¨å­é—®é¢˜å®šä¹‰çŠ¶æ€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i,w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span>è¡¨ç¤ºå‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶ç‰©å“æ”¾å…¥æ‰¿è½½é‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>çš„èƒŒåŒ…å¯è·å¾—çš„æœ€å¤§ä»·å€¼ï¼Œåˆ™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¾¿æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo>âˆ’</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">]</mo><mo>+</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F[i,w] = max(F[i-1,w],F[i-1,w-w_i]+v_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä»£è¡¨çš„æ„æ€æ˜¯è‹¥åªè€ƒè™‘ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶ç‰©å“çš„ç­–ç•¥ï¼ˆæ”¾æˆ–ä¸æ”¾ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªåªå’Œå‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ä»¶ç‰©å“ç›¸å…³çš„é—®é¢˜ã€‚</p><ul><li>å¦‚æœä¸æ”¾ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶ç‰©å“ï¼Œé—®é¢˜å°±è½¬åŒ–ä¸ºâ€œå‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>çš„èƒŒåŒ…ä¸­â€ï¼Œä»·å€¼ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i-1,w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span>ï¼›</li><li>å¦‚æœæ”¾ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶ç‰©å“ï¼Œé—®é¢˜å°±è½¬åŒ–ä¸ºâ€œå‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ä»¶ç‰©å“æ”¾å…¥å‰©ä¸‹çš„å®¹é‡ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>âˆ’</mo><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w-w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„èƒŒåŒ…ä¸­â€ï¼Œæ­¤æ—¶èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼å°±æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo>âˆ’</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i-1,w-w_i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>å†åŠ ä¸Šé€šè¿‡æ”¾å…¥ç¬¬iä»¶ç‰©å“è·å¾—çš„ä»·å€¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</li></ul><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><p>å…ˆéå†ç‰©å“å†éå†å®¹é‡(æ¨ªå‘æ›´æ–°)<br><img src="/img/algorithm/01pack_2d.png" alt="äºŒç»´å®ç°"></p><p>å…ˆéå†å®¹é‡å†éå†ç‰©å“(çºµå‘æ›´æ–°)<br><img src="/img/algorithm/01pack_2d_packfirst.png" alt="äºŒç»´å®ç°"><br>è“è‰²æ–¹å—è¡¨ç¤ºæ›´æ–°å®Œæˆï¼Œç»¿è‰²è¡¨ç¤ºå½“å‰éœ€è¦æ›´æ–°çš„å€¼ï¼Œçº¢è‰²è¡¨ç¤ºè¿˜æœªæ›´æ–°ï¼Œå¸¦æ–‡å­—çš„æ–¹å—è¡¨ç¤ºæ›´æ–°å½“å‰å€¼æ‰€éœ€è¦çš„å€¼ã€‚<br>å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºäºŒç»´å®ç°ï¼Œå…ˆéå†èƒŒåŒ…å®¹é‡æˆ–è€…å…ˆéå†ç‰©å“éƒ½å¯ä»¥ï¼Œå› ä¸ºæ›´æ–°å½“å‰ä½ç½®æ‰€éœ€ä¿¡æ¯æ—¶æ‰€éœ€è¦çš„å€¼(è“è‰²å¸¦æ–‡å­—æ–¹å—)éƒ½å·²ç»æ›´æ–°å®Œæˆ</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>a</mi><mi>g</mi><mi>W</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">bagWeight</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ba</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span></span></span></span>ä¸ºèƒŒåŒ…é‡é‡ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">weight</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span></span></span></span>è¡¨ç¤ºé‡é‡æ•°ç»„ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">value</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span>è¡¨ç¤ºä»·å€¼æ•°ç»„ï¼Œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆéå†ç‰©å“å†éå†å®¹é‡(æ¨ªå‘æ›´æ–°)      </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">zeroOnePack</span><span class="params">(<span class="keyword">int</span> bagWeight,vector&lt;<span class="keyword">int</span>&gt; weight,vector&lt;<span class="keyword">int</span>&gt; value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = weight.<span class="built_in">size</span>(), n = bagWeight;</span><br><span class="line">    <span class="comment">// dp[i][j] è¡¨ç¤ºå¯¹äºå‰iä»¶ç‰©å“ï¼Œå®¹é‡ä¸ºjçš„èƒŒåŒ…æ‰€èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼</span></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ– dp[*][0] = 0 dp[0][*] = 0</span></span><br><span class="line">    <span class="keyword">int</span> dp[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m+<span class="number">1</span>; i++)</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n+<span class="number">1</span>; i++)</span><br><span class="line">        dp[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; weight.<span class="built_in">size</span>(); i++) &#123; <span class="comment">// éå†ç‰©å“</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= bagWeight; j++) &#123; <span class="comment">// éå†èƒŒåŒ…å®¹é‡</span></span><br><span class="line">            <span class="keyword">if</span> (j &lt; weight[i]) </span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j]; </span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                dp[i][j] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>][j], dp[i - <span class="number">1</span>][j - weight[i]] + value[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆéå†å®¹é‡å†éå†ç‰©å“(çºµå‘æ›´æ–°)</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= bagWeight; j++) &#123; <span class="comment">// éå†èƒŒåŒ…å®¹é‡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; weight.<span class="built_in">size</span>(); i++) &#123; <span class="comment">// éå†ç‰©å“</span></span><br><span class="line">        <span class="keyword">if</span> (j &lt; weight[i]) </span><br><span class="line">            dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            dp[i][j] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>][j], dp[i - <span class="number">1</span>][j - weight[i]] + value[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç©ºé—´ä¼˜åŒ–">ç©ºé—´ä¼˜åŒ–</h3><p>é‡‡ç”¨ä¸€ç»´æ•°ç»„å»æ›¿ä»£äºŒç»´æ•°ç»„ï¼Œè¿™è¦æ±‚åœ¨dpèƒ½å¤ŸåŒæ—¶ä¿å­˜ä¸Šä¸€å±‚ä¿¡æ¯å’Œæ›´æ–°æœ¬å±‚<br>å› ä¸ºæ›´æ–°å½“å‰ä½ç½®æ‰€éœ€ä¿¡æ¯åªåœ¨<strong>ä¸Šä¸€å±‚å·¦è¾¹å’Œæ­£ä¸Šæ–¹</strong>ï¼Œå¿…éœ€é‡‡ç”¨é€†åºã€‚<br><img src="/img/algorithm/01pack_1d.png" alt="ä¸€ç»´å®ç°"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">zeroOnePack</span><span class="params">(<span class="keyword">int</span> bagWeight,vector&lt;<span class="keyword">int</span>&gt; weight,vector&lt;<span class="keyword">int</span>&gt; value)</span></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(bagWeight+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; weight.<span class="built_in">size</span>(); i++) &#123; <span class="comment">// éå†ç‰©å“</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = bagWeight; j &gt;= weight[i]; j--) &#123; <span class="comment">// éå†èƒŒåŒ…å®¹é‡</span></span><br><span class="line">            <span class="comment">//è¿™æ ·ä¿è¯ç‰©ä½“iåªåœ¨æœ¬æ¬¡å¾ªç¯è¢«ä½¿ç”¨ï¼Œå› ä¸ºç­‰å¼å³è¾¹çš„dpä¿å­˜çš„æ˜¯å‰i-1ä¸ªç‰©å“</span></span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j], dp[j - weight[i]] + value[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[bagWeight];   </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œå…¨èƒŒåŒ…">å®Œå…¨èƒŒåŒ…</h2><p>å®Œå…¨èƒŒåŒ…ä¸0-1èƒŒåŒ…çš„åŒºåˆ«åœ¨äºç‰©å“çš„ä¸ªæ•°æ˜¯æ— é™çš„ï¼Œå³å¯é‡å¤é€‰æ‹©ç›¸åŒç‰©å“å¡«å……</p><h3 id="åŸºæœ¬æ€è·¯-2">åŸºæœ¬æ€è·¯</h3><ol><li>åŸºæœ¬æ€è·¯<br>æ¨¡ä»¿0-1èƒŒåŒ…çš„è§£æ³•</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">{</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo>âˆ’</mo><mi>k</mi><mo>âˆ—</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">]</mo><mo>+</mo><mi>k</mi><mo>âˆ—</mo><msub><mi>v</mi><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi><mn>0</mn><mo>&lt;</mo><mo>=</mo><mi>k</mi><mo>âˆ—</mo><msub><mi>w</mi><mi>i</mi></msub><mo>&lt;</mo><mo>=</mo><mi>W</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">F[i,w] = max\{F[i-1,w-k*w_i]+k*v_i | 0&lt;=k*w_i&lt;=W\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mclose">}</span></span></span></span></span></p><ol start="2"><li>è½¬æ¢ä¸º0-1èƒŒåŒ…<br>æ¯ä¸ªç‰©å“i,æœ€å¤šèƒ½æ”¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>W</mi><msub><mi>w</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{W}{w_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3174em;vertical-align:-0.4451em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ä»¶ï¼Œé‚£ä¹ˆå°±æŠŠç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶æ‰©å……è‡³<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>W</mi><msub><mi>w</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{W}{w_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3174em;vertical-align:-0.4451em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ä»¶ï¼Œç„¶åè§£å†³è¿™ä¸ª0-1èƒŒåŒ…é—®é¢˜<br>åˆ™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¾¿æ˜¯<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>w</mi><mo>âˆ’</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">]</mo><mo>+</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F[i,w] = max(F[i-1,w],F[i,w-w_i]+v_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p></li></ol><ul><li>å¦‚æœä¸æ”¾ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»¶ç‰©å“ï¼Œé—®é¢˜å°±è½¬åŒ–ä¸ºâ€œå‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>çš„èƒŒåŒ…ä¸­â€ï¼Œä»·å€¼ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i-1,w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span>ï¼›</li><li>åœ¨è€ƒè™‘â€œé€‰ä¸€ä»¶ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ç§ç‰©å“â€æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå¯èƒ½å·²é€‰å…¥ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>ç§ç‰©å“çš„å­ç»“æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>w</mi><mo>âˆ’</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i,w-w_i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>ã€‚è€Œä¸æ˜¯åªé€‰åˆ°å‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>çš„å­ç»“æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>w</mi><mo>âˆ’</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i-1,w-w_i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></li></ul><h3 id="äºŒç»´å®ç°">äºŒç»´å®ç°</h3><p>å…ˆéå†ç‰©å“å†éå†å®¹é‡(æ¨ªå‘æ›´æ–°)<br><img src="/img/algorithm/completepack_2d.png" alt="äºŒç»´å®ç°"><br>å…ˆéå†å®¹é‡å†éå†ç‰©å“(çºµå‘æ›´æ–°)<br><img src="/img/algorithm/completepack_2d_packfirst.png" alt="äºŒç»´å®ç°"></p><p>å’Œ0-1èƒŒåŒ…ä¸€æ ·ï¼Œå¯¹äºäºŒç»´å®ç°ï¼Œå…ˆéå†ç‰©å“å’Œå…ˆéå†å®¹é‡éƒ½æ˜¯å¯è¡Œçš„ã€‚åŸå› å°±åœ¨äºä¸ç®¡é‡‡ç”¨é‚£ç§éå†é¡ºåˆ©æ€»æ˜¯ä¿è¯æ›´æ–°å½“å‰ä½ç½®æ—¶æ‰€éœ€è¦çš„ä¿¡æ¯å·²ç»å‡†å¤‡å¥½äº†</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>a</mi><mi>g</mi><mi>W</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">bagWeight</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ba</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span></span></span></span>ä¸ºèƒŒåŒ…é‡é‡ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">weight</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span></span></span></span>è¡¨ç¤ºé‡é‡æ•°ç»„ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">value</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span>è¡¨ç¤ºä»·å€¼æ•°ç»„ï¼Œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">completePack</span><span class="params">(<span class="keyword">int</span> bagWeight,vector&lt;<span class="keyword">int</span>&gt; weight,vector&lt;<span class="keyword">int</span>&gt; value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = weight.<span class="built_in">size</span>(), n = bagWeight;</span><br><span class="line">    <span class="comment">// dp[i][j] è¡¨ç¤ºå¯¹äºå‰iä»¶ç‰©å“ï¼Œå®¹é‡ä¸ºjçš„èƒŒåŒ…æ‰€èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼</span></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ– dp[*][0] = 0 dp[0][*] = 0</span></span><br><span class="line">    <span class="keyword">int</span> dp[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m+<span class="number">1</span>; i++)</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n+<span class="number">1</span>; i++)</span><br><span class="line">        dp[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; weight.<span class="built_in">size</span>(); i++) &#123; <span class="comment">// éå†ç‰©å“</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= bagWeight; j++) &#123; <span class="comment">// éå†èƒŒåŒ…å®¹é‡</span></span><br><span class="line">            <span class="keyword">if</span> (j &lt; weight[i]) </span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j]; </span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                dp[i][j] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>][j], dp[i][j - weight[i]] + value[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç©ºé—´ä¼˜åŒ–-2">ç©ºé—´ä¼˜åŒ–</h3><p>é‡‡ç”¨ä¸€ç»´æ•°ç»„å»æ›¿ä»£äºŒç»´æ•°ç»„ï¼Œ<br>å› ä¸ºæ›´æ–°å½“å‰ä½ç½®æ‰€éœ€ä¿¡æ¯<strong>æœ¬å±‚å·¦è¾¹å’Œæ­£ä¸Šæ–¹</strong>ï¼Œå¯¹åº”åˆ°ä¸€ç»´å°±æ˜¯å½“å‰ä½ç½®å·¦è¾¹å’Œè‡ªèº«ä½ç½®ï¼Œéœ€é‡‡ç”¨æ­£å‘éå†ï¼ŒåŠæ—¶æ›´æ–°æœ¬å±‚å·¦è¾¹æ–¹å—<br><img src="/img/algorithm/completepack_1d.png" alt="ä¸€ç»´å®ç°"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">completePack</span><span class="params">(<span class="keyword">int</span> bagWeight,vector&lt;<span class="keyword">int</span>&gt; weight,vector&lt;<span class="keyword">int</span>&gt; value)</span></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(bagWeight+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; weight.<span class="built_in">size</span>(); i++) &#123; <span class="comment">// éå†ç‰©å“       </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = weight[i]; j &lt;= bagWeight; j++) &#123; <span class="comment">// éå†èƒŒåŒ…å®¹é‡</span></span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j], dp[j - weight[i]] + value[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[bagWeight];   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>ä¸ç®¡æ˜¯0-1èƒŒåŒ…è¿˜æ˜¯å®Œå…¨èƒŒåŒ…ï¼Œå…¶äºŒç»´å®ç°ä¸¤ç§éå†é¡ºåºéƒ½æ˜¯å¯ä»¥çš„</li><li>0-1èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…è§£å†³çš„æ˜¯ç»„åˆé—®é¢˜ï¼Œå¹¶éæ’åˆ—é—®é¢˜ï¼Œæ’åˆ—é—®é¢˜å‚è€ƒçˆ¬æ¥¼æ¢¯</li><li>0-1èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…ç»„åˆé—®é¢˜éƒ½æ˜¯å¤–å±‚éå†ç‰©å“ï¼Œå†…å±‚éå†èƒŒåŒ…å®¹é‡ã€‚</li><li>0-1èƒŒåŒ…æ˜¯<strong>é€†å‘</strong>éå†èƒŒåŒ…å®¹é‡ï¼Œä¿è¯å½“å‰ç‰©å“æœ€å¤šä¸€ä¸ªè¢«åŠ å…¥ã€‚å®Œå…¨èƒŒåŒ…<strong>æ­£å‘</strong>éå†ï¼Œä½¿å¾—å¯ä»¥å½“å‰ç‰©å“å¯å¤šæ¬¡è¢«åŠ å…¥</li><li>å¯¹äºæ’åˆ—é—®é¢˜ï¼Œå…ˆéå†èƒŒåŒ…ï¼Œåœ¨éå†ç‰©å“ã€‚<a href="https://leetcode-cn.com/problems/combination-sum-iv/">å‚è€ƒçˆ¬æ¥¼æ¢¯è¿›é˜¶ç‰ˆ</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/tianyicui/pack&quot;&gt;èƒŒåŒ…ä¹è®²&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;0-1èƒŒåŒ…&quot;&gt;0-1èƒŒåŒ…&lt;/h2&gt;
&lt;h3 id=&quot;é¢˜ç›®&quot;&gt;é¢˜ç›®&lt;/h3&gt;
&lt;p&gt;æœ‰&lt;sp</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://blog.hellowei.ga/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="èƒŒåŒ…é—®é¢˜" scheme="https://blog.hellowei.ga/tags/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ’åºç®—æ³•(ä¸‰)â€”â€”å †ã€è®¡æ•°ã€æ¡¶ã€åŸºæ•°æ’åº</title>
    <link href="https://blog.hellowei.ga/2021/12/09/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%9503/"/>
    <id>https://blog.hellowei.ga/2021/12/09/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%9503/</id>
    <published>2021-12-09T08:56:11.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å †æ’åº">å †æ’åº</h3><p>å †æ’åº(Heapsort)æ˜¯æŒ‡åˆ©ç”¨å †ç§¯æ ‘ï¼ˆå †ï¼‰è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå®ƒæ˜¯é€‰æ‹©æ’åºçš„ä¸€ç§ã€‚å¯ä»¥åˆ©ç”¨æ•°ç»„çš„ç‰¹ç‚¹å¿«é€Ÿå®šä½æŒ‡å®šç´¢å¼•çš„å…ƒç´ ã€‚å †æ’åºå°±æ˜¯æŠŠæœ€å¤§å †å †é¡¶çš„æœ€å¤§æ•°å–å‡ºï¼Œå°†å‰©ä½™çš„å †ç»§ç»­è°ƒæ•´ä¸ºæœ€å¤§å †ï¼Œå†æ¬¡å°†å †é¡¶çš„æœ€å¤§æ•°å–å‡ºï¼Œè¿™ä¸ªè¿‡ç¨‹æŒç»­åˆ°å‰©ä½™æ•°åªæœ‰ä¸€ä¸ªæ—¶ç»“æŸã€‚</p><h4 id="å †çš„æ¦‚å¿µ">å †çš„æ¦‚å¿µ</h4><p>å †æ˜¯ä¸€ç§å®Œå…¨äºŒå‰æ ‘ï¼Œè¿™ä½¿å¾—å †(å®Œå…¨äºŒå‰æ ‘)å¯ä»¥ç”¨æ•°ç»„è¿›è¡Œè¡¨ç¤ºã€‚å¦‚ä¸‹å›¾æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”æ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ä¸”å¯ä»¥é€šè¿‡æ•°ç»„ä¸‹æ ‡æ¥åˆ¤æ–­èŠ‚ç‚¹é—´ä½ç½®ã€‚<br>å¯¹äºç»™å®šä¸‹æ ‡ä¸º<code>i</code>çš„æ•°ç»„ä¸­çš„æ•°ç»„,å…¶è¯¥å…ƒç´ æ‰€å¯¹åº”çš„çˆ¶èŠ‚ç‚¹ã€å­©å­èŠ‚ç‚¹ä¸‹æ ‡ä¸º(ä»¥1ä½œä¸ºå¼€å§‹)ï¼š<br>çˆ¶èŠ‚ç‚¹ï¼š    <code>Parent(i) = floor(i/2)</code><br>å·¦å­©å­èŠ‚ç‚¹ï¼š <code>Left(i) = 2*i</code><br>å³å­©å­èŠ‚ç‚¹:  <code>Right(i)= 2*i +1</code><br><img src="/img/algorithm/heap.png" alt="heap"></p><ul><li>æœ€å¤§å †å³æœ€å¤§å…ƒç´ å€¼å‡ºç°åœ¨æ ¹ç»“ç‚¹ï¼Œå †ä¸­æ¯ä¸ªçˆ¶èŠ‚ç‚¹çš„å…ƒç´ å€¼éƒ½å¤§äºç­‰äºå…¶å­©å­ç»“ç‚¹ ç”¨äº<strong>å‡åº</strong>æ’åˆ—</li><li>æœ€å°å †ä¸­çš„æœ€å°å…ƒç´ å€¼å‡ºç°åœ¨æ ¹ç»“ç‚¹ï¼Œå †ä¸­æ¯ä¸ªçˆ¶èŠ‚ç‚¹çš„å…ƒç´ å€¼éƒ½å°äºç­‰äºå…¶å­©å­ç»“ç‚¹ ç”¨äº<strong>é™åº</strong>æ’åˆ—</li></ul><h4 id="ç®—æ³•æè¿°">ç®—æ³•æè¿°</h4><p>å †æ’åºå°±æ˜¯æŠŠæœ€å¤§å †å †é¡¶çš„æœ€å¤§æ•°å–å‡ºï¼Œå°†å‰©ä½™çš„å †ç»§ç»­è°ƒæ•´ä¸ºæœ€å¤§å †ï¼Œå†æ¬¡å°†å †é¡¶çš„æœ€å¤§æ•°å–å‡ºï¼Œè¿™ä¸ªè¿‡ç¨‹æŒç»­åˆ°å‰©ä½™æ•°åªæœ‰ä¸€ä¸ªæ—¶ç»“æŸã€‚åœ¨å †ä¸­å®šä¹‰ä»¥ä¸‹å‡ ç§æ“ä½œ</p><ul><li><p>æœ€å¤§å †è°ƒæ•´ï¼ˆMax-Heapifyï¼‰ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹</p></li><li><p>åˆ›å»ºæœ€å¤§å †ï¼ˆBuild-Max-Heapï¼‰ï¼šå°†å †æ‰€æœ‰æ•°æ®é‡æ–°æ’åºï¼Œä½¿å…¶æˆä¸ºæœ€å¤§å †<br><img src="/img/algorithm/buildHeap.gif" alt="buildHeap"></p></li><li><p>ç§»é™¤ä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®—<br><img src="/img/algorithm/adjustHeap.gif" alt="adjustHeap"></p></li></ul><h4 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h4><p>éœ€è¦æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šæ•°ç»„éƒ½æ˜¯ Zero-Basedï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬çš„å †æ•°æ®ç»“æ„æ¨¡å‹è¦å‘ç”Ÿæ”¹å˜å³<br>å¯¹äºç»™å®šä¸‹æ ‡ä¸º<code>i</code>çš„æ•°ç»„ä¸­çš„æ•°ç»„,å…¶è¯¥å…ƒç´ æ‰€å¯¹åº”çš„çˆ¶èŠ‚ç‚¹ã€å­©å­èŠ‚ç‚¹ä¸‹æ ‡ä¸º(ä»¥0ä½œä¸ºå¼€å§‹)ï¼š<br>çˆ¶èŠ‚ç‚¹ï¼š    <code>Parent(i) = floor((i-1)/2)</code><br>å·¦å­©å­èŠ‚ç‚¹ï¼š <code>Left(i) = 2*i+1</code><br>å³å­©å­èŠ‚ç‚¹:  <code>Right(i)= 2*(i+1)</code></p><p>å¯¹äºåˆ©ç”¨å †æ’åºï¼Œåªå…³å¿ƒä¸¤ä¸ªé—®é¢˜</p><ol><li>ç»™å®šä¸€ä¸ªæ— åºæ•°ç»„ï¼Œå¦‚ä½•å»ºç«‹å †</li><li>åˆ é™¤å †é¡¶å…ƒç´ ï¼Œå¦‚ä½•è°ƒæ•´æˆä¸ºæ–°çš„å †</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lastIndex = len<span class="number">-1</span>;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æœ€å¤§å †</span></span><br><span class="line">    <span class="comment">//ä»ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="built_in">getParentIndex</span>(lastIndex); i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="built_in">adjustHeap</span>(arr,i,lastIndex);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤å †é¡¶å…ƒç´ ,é‡æ–°è°ƒæ•´å †</span></span><br><span class="line">    <span class="keyword">while</span>(lastIndex&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">swap</span>(arr[<span class="number">0</span>],arr[lastIndex]);</span><br><span class="line">        lastIndex--;</span><br><span class="line">        <span class="built_in">adjustHeap</span>(arr,<span class="number">0</span>,lastIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">adjustHeap</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> curIndex, <span class="keyword">int</span> endIndex)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left,right,exchangeIndex;</span><br><span class="line">    left = <span class="built_in">getLeftChildIndex</span>(curIndex);</span><br><span class="line">    <span class="keyword">while</span>(left &lt;= endIndex)&#123;</span><br><span class="line">        <span class="comment">//é€‰æ‹©å·¦å³å­©å­ä¸­è¾ƒå¤§çš„è¿›è¡Œäº¤æ¢</span></span><br><span class="line">        right = left  + <span class="number">1</span>;</span><br><span class="line">        exchangeIndex = left;</span><br><span class="line">        <span class="keyword">if</span>(right &lt;= endIndex &amp;&amp; arr[left] &lt; arr[right])&#123;</span><br><span class="line">            exchangeIndex = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è‹¥å½“å‰èŠ‚ç‚¹å°äºå…¶å­©å­èŠ‚ç‚¹ï¼Œäº¤æ¢å¹¶ä¸‹æ²‰</span></span><br><span class="line">        <span class="keyword">if</span>(arr[curIndex] &lt; arr[exchangeIndex])&#123;</span><br><span class="line">            <span class="built_in">swap</span>(arr[curIndex],arr[exchangeIndex]);</span><br><span class="line">            curIndex = exchangeIndex;</span><br><span class="line">            left = <span class="built_in">getLeftChildIndex</span>(curIndex);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getParentIndex</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (index<span class="number">-1</span>) /<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getLeftChildIndex</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * index + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>å †æ’åºå­˜åœ¨å¤§é‡çš„ç­›é€‰å’Œç§»åŠ¨è¿‡ç¨‹ï¼Œå±äºä¸ç¨³å®šçš„æ’åºç®—æ³•</li><li>å †æ’åºåœ¨å»ºç«‹å †å’Œè°ƒæ•´å †çš„è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿæ¯”è¾ƒå¤§çš„å¼€é”€ï¼Œåœ¨å…ƒç´ å°‘çš„æ—¶å€™å¹¶ä¸é€‚ç”¨</li><li>åœ¨å…ƒç´ æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹,å°¤å…¶æ˜¯åœ¨è§£å†³è¯¸å¦‚â€œå‰nå¤§çš„æ•°â€ä¸€ç±»é—®é¢˜æ—¶ï¼Œå‡ ä¹æ˜¯é¦–é€‰ç®—æ³•ã€‚</li></ol><h3 id="è®¡æ•°æ’åº">è®¡æ•°æ’åº</h3><p>è®¡æ•°æ’åºä¸æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œå…¶æ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚ ä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºï¼Œè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯<strong>æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°</strong>ã€‚</p><h4 id="ç®—æ³•æè¿°-2">ç®—æ³•æè¿°</h4><ol><li>æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ï¼›</li><li>ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹ï¼›</li><li>å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ï¼›</li><li>åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1</li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/countSort.gif" alt="countSort"></p><h4 id="ç®—æ³•å®ç°-2">ç®—æ³•å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">countSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> len, <span class="keyword">int</span> maxVal, <span class="keyword">int</span> minVal)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cntLen = maxVal- minVal + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>* cntVec = <span class="keyword">new</span> <span class="keyword">int</span>[cntLen];</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = minVal; i &lt;= maxVal;i++)</span><br><span class="line">        cntVec[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»Ÿè®¡æ¯ä¸ªå€¼å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++ )&#123;</span><br><span class="line">        cntVec[arr[i]-minVal]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒ‰ç…§è®¡æ•°é¡ºåºå°†å…¶ä¾æ¬¡å¡«å……åˆ°åŸæ•°ç»„ä¸­</span></span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">0</span>;  <span class="comment">//æŒ‡å‘è®¡æ•°æ•°ç»„</span></span><br><span class="line">    <span class="keyword">int</span> curIndex = <span class="number">0</span>; <span class="comment">//æŒ‡å‘éœ€è¦è¢«å¡«å……çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">while</span>(p &lt; cntLen)&#123;</span><br><span class="line">        <span class="keyword">while</span>(cntVec[p] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            arr[curIndex++] = p + minVal;</span><br><span class="line">            cntVec[p]--;</span><br><span class="line">        &#125;</span><br><span class="line">        p++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> []cntVec;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹-2">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>æ’åºç›®æ ‡è¦èƒ½å¤Ÿæ˜ å°„åˆ°æ•´æ•°åŸŸï¼Œå…¶æœ€å¤§å€¼æœ€å°å€¼åº”å½“å®¹æ˜“è¾¨åˆ«</li><li>è®¡æ•°æ’åºéœ€è¦å ç”¨å¤§é‡ç©ºé—´ï¼Œå®ƒæ¯”è¾ƒé€‚ç”¨äºæ•°æ®æ¯”è¾ƒé›†ä¸­çš„æƒ…å†µ</li></ol><h3 id="æ¡¶æ’åº">æ¡¶æ’åº</h3><p>æ¡¶æ’åºåˆå«ç®±æ’åºï¼Œæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯å°†æ•°ç»„åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶å­é‡Œï¼Œç„¶åå¯¹æ¯ä¸ªæ¡¶å­å†åˆ†åˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ï¼Œæœ€åå°†å„ä¸ªæ¡¶ä¸­çš„æ•°æ®æœ‰åºçš„åˆå¹¶èµ·æ¥ã€‚</p><blockquote><p>è®¡æ•°æ’åºæ˜¯æ¡¶æ’åºçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¯ä»¥æŠŠè®¡æ•°æ’åºå½“æˆæ¯ä¸ªæ¡¶é‡Œåªæœ‰ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µ<br>æ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚ä¸ºäº†ä½¿æ¡¶æ’åºæ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°è¿™ä¸¤ç‚¹ï¼š</p></blockquote><ol><li>åœ¨é¢å¤–ç©ºé—´å……è¶³çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¢å¤§æ¡¶çš„æ•°é‡</li><li>ä½¿ç”¨çš„æ˜ å°„å‡½æ•°èƒ½å¤Ÿå°†è¾“å…¥çš„ N ä¸ªæ•°æ®å‡åŒ€çš„åˆ†é…åˆ° K ä¸ªæ¡¶ä¸­</li></ol><h4 id="ç®—æ³•æè¿°-3">ç®—æ³•æè¿°</h4><ol><li>æ‰¾å‡ºå¾…æ’åºæ•°ç»„ä¸­çš„æœ€å¤§å€¼maxã€æœ€å°å€¼min</li><li>ä½¿ç”¨æ•°ç»„ä½œä¸ºæ¡¶ï¼Œæ¡¶é‡Œæ”¾çš„å…ƒç´ ç”¨å­˜å‚¨ã€‚æ¡¶çš„æ•°é‡ä¸º(max-min)/arr.length+1</li><li>éå†æ•°ç»„ arrï¼Œè®¡ç®—æ¯ä¸ªå…ƒç´  arr[i] æ”¾çš„æ¡¶</li><li>æ¯ä¸ªæ¡¶å„è‡ªæ’åº</li><li>éå†æ¡¶æ•°ç»„ï¼ŒæŠŠæ’åºå¥½çš„å…ƒç´ æ”¾è¿›è¾“å‡ºæ•°ç»„</li></ol><h4 id="å›¾ç‰‡è§£é‡Š">å›¾ç‰‡è§£é‡Š</h4><p><img src="/img/algorithm/bucketSort.png" alt="bucketSort"></p><h4 id="ç®—æ³•ç‰¹ç‚¹-3">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>å½“è¾“å…¥æ•°æ®å¯ä»¥å‡åŒ€çš„åˆ†é…åˆ°æ¡¶æœ€å¿«</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n+k)ï¼Œæ—¶é—´å¤æ‚åº¦O(n+k)</li></ol><h3 id="åŸºæ•°æ’åº">åŸºæ•°æ’åº</h3><p>åŸºæ•°æ’åº(Radix Sort)æ˜¯æ¡¶æ’åºçš„æ‰©å±•ï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚<br>æ’åºè¿‡ç¨‹ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p><p>å®é™…ä¸Šï¼ŒåŸºæ•°æ’åºç®—æ³•å¯¹æ’åºå…ƒç´ çš„ç±»å‹ä¸è¦æ±‚ä¸€å®šæ˜¯éè´Ÿæ•´æ•°æ‰å¯ä»¥è¿›è¡Œï¼Œå…¶å¯¹äºå­—ç¬¦ä¸²ã€æµ®ç‚¹æ•°ç­‰ç±»å‹å‡å¯é€‚ç”¨ã€‚å…¶å…³é”®åœ¨äºè¦æ±‚æ’åºå…ƒç´ çš„æ•°ä½é•¿åº¦ç»Ÿä¸€ã€‚ä¾‹å¦‚å¯¹æ•´æ•°æ’åºæ—¶ï¼Œå¦‚æœæ’åºå…ƒç´ ä¸­å«æœ‰è´Ÿæ•°ï¼Œåˆ™å¯ä»¥å¯¹æ’åºå…ƒç´ å‡åŠ ä¸Šä¸€ä¸ªæ•°ä½¿å…¶å…¨éƒ¨ä¸ºéè´Ÿæ•´æ•°ï¼›å¦‚æœå…ƒç´ ç±»å‹æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œåœ¨è®¡æ•°æ’åºè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥ä½å­—ç¬¦å¯¹åº”ASCIIç å€¼è¿›è¡Œè®¡æ•°ï¼Œå¯¹äºé•¿åº¦ä¸è¶³çš„å­—ç¬¦ä¸²ï¼Œå¯ç›´æ¥åœ¨å…¶åé¢è¡¥0å®ç°é•¿åº¦å¯¹é½ã€‚å³åœ¨è®¡æ•°æ’åºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°æŸä½å­—ç¬¦æ˜¯ä¸ºå¯¹é½æ‰€å¡«å……çš„0çš„è¯ï¼Œåˆ™å¯è®¤ä¸ºå…¶å¯¹åº”çš„ASCIIç å€¼ä¸º0è¿›è¡Œè®¡æ•°ï¼Œå› ä¸ºå­—ç¬¦â€™Aâ€™æ‰€å¯¹åº”çš„ASCIIç å€¼æ˜¯65ï¼Œå­—ç¬¦â€™0â€™æ‰€å¯¹åº”çš„ASCIIç å€¼æ˜¯48ï¼Œå‡æ¯”0å¤§ã€‚è¿™æ ·å³å¯ä¿è¯åŸºæ•°æ’åºçš„ç»“æœæ˜¯ç¬¦åˆå­—å…¸åºçš„å®ç°</p><h4 id="åŠ¨å›¾æ¼”ç¤º-2">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/radixSort.gif" alt="radixSort"></p><h4 id="ç®—æ³•ç‰¹ç‚¹-4">ç®—æ³•ç‰¹ç‚¹</h4><ol><li><p>é€šè¿‡ä¸Šé¢çš„æ’åºè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€è½®æ˜ å°„å’Œæ”¶é›†æ“ä½œï¼Œéƒ½ä¿æŒä»å·¦åˆ°å³çš„é¡ºåºè¿›è¡Œï¼Œå¦‚æœå‡ºç°ç›¸åŒçš„å…ƒç´ ï¼Œåˆ™ä¿æŒä»–ä»¬åœ¨åŸå§‹æ•°ç»„ä¸­çš„é¡ºåºã€‚å¯è§ï¼ŒåŸºæ•°æ’åºæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºã€‚</p></li><li><p>åŸºæ•°æ’åºè¦æ±‚è¾ƒé«˜ï¼Œå…ƒç´ å¿…é¡»æ˜¯æ•´æ•°ï¼Œæ•´æ•°æ—¶é•¿åº¦10Wä»¥ä¸Šï¼Œæœ€å¤§å€¼100Wä»¥ä¸‹æ•ˆç‡è¾ƒå¥½ï¼Œä½†æ˜¯åŸºæ•°æ’åºæ¯”å…¶ä»–æ’åºå¥½åœ¨å¯ä»¥é€‚ç”¨å­—ç¬¦ä¸²ï¼Œæˆ–è€…å…¶ä»–éœ€è¦æ ¹æ®å¤šä¸ªæ¡ä»¶è¿›è¡Œæ’åºçš„åœºæ™¯ï¼Œä¾‹å¦‚æ—¥æœŸï¼Œå…ˆæ’åºæ—¥ï¼Œå†æ’åºæœˆï¼Œæœ€åæ’åºå¹´ ï¼Œå…¶å®ƒæ’åºç®—æ³•å¯æ˜¯åšä¸äº†çš„</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;å †æ’åº&quot;&gt;å †æ’åº&lt;/h3&gt;
&lt;p&gt;å †æ’åº(Heapsort)æ˜¯æŒ‡åˆ©ç”¨å †ç§¯æ ‘ï¼ˆå †ï¼‰è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå®ƒæ˜¯é€‰æ‹©æ’åºçš„ä¸€ç§ã€‚å¯ä»¥åˆ©ç”¨æ•°ç»„çš„ç‰¹ç‚¹å¿«é€Ÿå®šä½æŒ‡å®šç´¢å¼•çš„å…ƒç´ ã€‚å †æ’åºå°±æ˜¯æŠŠæœ€å¤§å †å †é¡¶çš„æœ€å¤§æ•°å–å‡ºï¼Œå°†å‰©ä½™çš„å †ç»§ç»­è°ƒæ•´ä¸ºæœ€å¤§å †ï¼Œå†æ¬¡å°†å †é¡¶çš„æœ€å¤§æ•°å–å‡ºï¼Œ</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://blog.hellowei.ga/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ’åº" scheme="https://blog.hellowei.ga/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ’åºç®—æ³•(äºŒ)â€”â€”å¸Œå°”ã€å¿«é€Ÿã€å½’å¹¶</title>
    <link href="https://blog.hellowei.ga/2021/12/07/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%9502/"/>
    <id>https://blog.hellowei.ga/2021/12/07/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%9502/</id>
    <published>2021-12-07T14:26:47.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¸Œå°”æ’åº-æ’å…¥æ’åºçš„æ”¹è‰¯ç‰ˆ">å¸Œå°”æ’åº(æ’å…¥æ’åºçš„æ”¹è‰¯ç‰ˆ)</h3><p>åœ¨å¸Œå°”æ’åºå‡ºç°ä¹‹å‰ï¼Œè®¡ç®—æœºç•Œæ™®éå­˜åœ¨â€œæ’åºç®—æ³•ä¸å¯èƒ½çªç ´O(n2)â€çš„è§‚ç‚¹ã€‚å¸Œå°”æ’åºæ˜¯ç¬¬ä¸€ä¸ªçªç ´O(n2)çš„æ’åºç®—æ³•ï¼Œå®ƒæ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆã€‚å¸Œå°”æ’åºçš„æå‡ºï¼Œä¸»è¦åŸºäºä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol><li>æ’å…¥æ’åºç®—æ³•åœ¨æ•°ç»„åŸºæœ¬æœ‰åºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿‘ä¼¼è¾¾åˆ°O(n)å¤æ‚åº¦ï¼Œæ•ˆç‡æé«˜ã€‚</li><li>ä½†æ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½ï¼Œåœ¨æ•°ç»„è¾ƒå¤§ä¸”åŸºæœ¬æ— åºçš„æƒ…å†µä¸‹æ€§èƒ½ä¼šè¿…é€Ÿæ¶åŒ–ã€‚</li></ol><h4 id="ç®—æ³•æè¿°">ç®—æ³•æè¿°</h4><p>å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•&quot;åŸºæœ¬æœ‰åº&quot;æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åº</p><ol><li>é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›</li><li>æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œ k è¶Ÿæ’åº</li><li>æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦<br><img src="/img/algorithm/shellSortDes.png" alt="å¸Œå°”æ’åº"></li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/shellSort.gif" alt="å¸Œå°”æ’åº"></p><h4 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h4><p>åœ¨å¸Œå°”æ’åºçš„ç†è§£æ—¶ï¼Œæˆ‘ä»¬å€¾å‘äºå¯¹äºæ¯ä¸€ä¸ªåˆ†ç»„ï¼Œé€ç»„è¿›è¡Œå¤„ç†ï¼Œä½†åœ¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨è¿™ä¹ˆæŒ‰éƒ¨å°±ç­åœ°å¤„ç†å®Œä¸€ç»„å†è°ƒè½¬å›æ¥å¤„ç†ä¸‹ä¸€ç»„,å®ç°æ—¶ä¸ç”¨å¾ªç¯æŒ‰ç»„å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç¬¬gapä¸ªå…ƒç´ å¼€å§‹ï¼Œé€ä¸ªè·¨ç»„å¤„ç†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Donald Shellå¢é‡ æ¯æ¬¡åˆ†ç»„å‡åŠ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="comment">//å¢é‡deltaï¼Œå¹¶é€æ­¥ç¼©å°å¢é‡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> delta = len / <span class="number">2</span>; delta &gt;<span class="number">0</span>; delta /= <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="comment">//ä»ç¬¬deltaä¸ªå…ƒç´ å¼€å§‹ï¼Œé€ä¸ªå¯¹å…¶æ‰€åœ¨ç»„è¿›è¡Œç›´æ¥æ’å…¥æ’åºæ“ä½œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = delta; i&lt;len;i++)&#123;</span><br><span class="line">            <span class="comment">//å¯»æ‰¾å¯ä»¥æ’å…¥çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">int</span> pos = i;</span><br><span class="line">            <span class="keyword">int</span> curVal = arr[i];</span><br><span class="line">            <span class="keyword">while</span>(pos &gt;= delta &amp;&amp; arr[pos-delta] &gt; curVal)&#123;</span><br><span class="line">                arr[pos] = arr[pos-delta];</span><br><span class="line">                pos-=delta;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[pos] = curVal;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>å¸Œå°”æ’åºçš„å¢é‡æ•°åˆ—å¯ä»¥ä»»å–ï¼Œéœ€è¦çš„å”¯ä¸€æ¡ä»¶æ˜¯æœ€åä¸€ä¸ªä¸€å®šä¸º1ï¼ˆå› ä¸ºè¦ä¿è¯æŒ‰1æœ‰åºï¼‰</li><li>Donald Shellæå‡ºçš„å¢é‡ï¼Œå³æŠ˜åŠé™ä½ç›´åˆ°1,å…¶æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(n2)ã€‚Hibbardç»è¿‡å¤æ‚è¯æ˜å¯ä½¿å¾—æœ€åæ—¶é—´å¤æ‚åº¦ä¸ºO(n3/2)</li><li>Shellæ’åºä¸æ˜¯ä¸€ä¸ªç¨³å®šçš„ç®—æ³•</li></ol><h3 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h3><p>å¿«é€Ÿæ’åºç®—æ³•çŸ¥ååº¦è¾ƒé«˜ï¼Œå¯¹äºå¤§æ•°æ®å…·æœ‰ä¼˜ç§€çš„æ’åºæ€§èƒ½å’Œç›¸å¯¹ç®€å•çš„ç®—æ³•å®ç°ã€‚å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»æ³•ï¼ˆDivide and conquerï¼‰ç­–ç•¥æ¥æŠŠä¸€ä¸ªä¸²è¡Œï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­ä¸²è¡Œï¼ˆsub-listsï¼‰ã€‚</p><h4 id="ç®—æ³•æè¿°-2">ç®—æ³•æè¿°</h4><ol><li>ä»åºåˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†(pivot)</li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä½•ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒº(partition)æ“ä½œã€‚</li><li>é€’å½’çš„æŠŠå·¦å³ä¸¤è¾¹çš„å­—åºåˆ—è¿›è¡Œæ’åº</li><li>ç›´åˆ°å­æ•°ç»„é•¿åº¦ä¸º1</li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º-2">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/quickSort.gif" alt="å¿«é€Ÿæ’åº"></p><h4 id="ç®—æ³•å®ç°-2">ç®—æ³•å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> left,<span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">    <span class="comment">//left æ•°ç»„èµ·å§‹ä¸‹æ ‡</span></span><br><span class="line">    <span class="comment">//right æ•°ç»„ç»“æŸä¸‹æ ‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€’å½’ç»ˆæ­¢æ¡ä»¶ æ•°ç»„é•¿åº¦ä¸º1</span></span><br><span class="line">    <span class="keyword">if</span>(left &gt;= right)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//æ‰§è¡Œpartitionæ“ä½œï¼Œå°†æ•°ç»„åˆ†ä¸ºä¸¤ä¸ªå­æ•°ç»„</span></span><br><span class="line">    <span class="keyword">int</span> pivotIndex = <span class="built_in">partition</span>(arr,left,right);</span><br><span class="line">    <span class="comment">//é€’å½’è°ƒç”¨</span></span><br><span class="line">    <span class="built_in">quickSort</span>(arr,left,pivotIndex<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">quickSort</span>(arr,pivotIndex,right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> left,<span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">    <span class="comment">//é€‰å®šç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†(å¯éšæ„)</span></span><br><span class="line">    <span class="keyword">int</span> pivot = arr[left];</span><br><span class="line">    <span class="comment">//æ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢</span></span><br><span class="line">    <span class="keyword">while</span>(left &lt;right)&#123;</span><br><span class="line">        <span class="comment">//é‡‡å–åŒæŒ‡é’ˆçš„æ–¹å¼,ç§»åŠ¨leftå’Œright</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(left &lt;right &amp;&amp; arr[right] &gt;=pivot)</span><br><span class="line">            --right;</span><br><span class="line">        arr[left] = arr[right]; <span class="comment">//äº¤æ¢æ¯”åŸºå‡†å€¼å°çš„è‡³å·¦è¾¹</span></span><br><span class="line">        <span class="keyword">while</span>(left &lt;right &amp;&amp; arr[left] &lt;=pivot)</span><br><span class="line">            ++left;</span><br><span class="line">        arr[right] = arr[left]; <span class="comment">//äº¤æ¢æ¯”åŸºå‡†å€¼å¤§çš„è‡³å³è¾¹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰«æå®Œæˆï¼ŒåŸºå‡†åˆ°ä½</span></span><br><span class="line">        arr[left] = pivot;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ’åˆ†ç¬¬äºŒæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> left,<span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">    <span class="comment">//éšæœºé€‰ä¸­ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†arr[p],å¹¶æ”¾ç½®æœ«å°¾</span></span><br><span class="line">    <span class="comment">//swap(arr[p],arr[right]);</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œç›´æ¥é€‰æ‹©arr[right]ä½œä¸ºåŸºå‡†</span></span><br><span class="line">    <span class="keyword">int</span> pivot = arr[right];</span><br><span class="line">    <span class="comment">//åŒæŒ‡é’ˆ</span></span><br><span class="line">    <span class="comment">//[left,iï¼‰å‡å°äºç­‰äºpivot</span></span><br><span class="line">    <span class="comment">//[i,j)å‡å¤§äºç­‰äºpivot</span></span><br><span class="line">    <span class="comment">//[j,rightï¼‰è¡¨ç¤ºæœªæ‰«æåŒºé—´</span></span><br><span class="line">    <span class="keyword">int</span> i = left; </span><br><span class="line">    <span class="comment">//æ‰«æé™¤åŸºå‡†å¤–çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = left;j &lt; right;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[j] &lt;= pivot)&#123;</span><br><span class="line">            <span class="built_in">swap</span>(arr[i],arr[j]);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†åŸºå‡†æ”¾ç½®æ­£ç¡®ä½ç½®</span></span><br><span class="line">    <span class="built_in">swap</span>(arr[i],arr[right]);</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/algorithm/partition.png" alt="partition"></p><h4 id="ç®—æ³•ç‰¹ç‚¹-2">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>å¿«é€Ÿæ’åºå¹¶ä¸æ˜¯ç¨³å®šçš„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ— æ³•ä¿è¯ç›¸ç­‰çš„æ•°æ®æŒ‰é¡ºåºè¢«æ‰«æåˆ°å’ŒæŒ‰é¡ºåºå­˜æ”¾</li><li>åœ¨æœ€åçŠ¶å†µä¸‹æ—¶é—´å¤æ‚åº¦(é¡ºåºæ•°åˆ—)åˆ™éœ€è¦ ÎŸ(n2),å¹³å‡ÎŸ(nlogn)</li></ol><h3 id="å½’å¹¶æ’åº">å½’å¹¶æ’åº</h3><h4 id="ç®—æ³•æè¿°-3">ç®—æ³•æè¿°</h4><p><img src="/img/algorithm/mergeSort.png" alt="mergeSort"></p><ol><li>ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—</li><li>è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®</li><li>æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®</li><li>é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾</li><li>å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾</li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º-3">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/mergeSort.gif" alt="mergeSort"></p><h4 id="ç®—æ³•å®ç°-3">ç®—æ³•å®ç°</h4><h5 id="æ•°ç»„æ’åº">æ•°ç»„æ’åº</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> left,<span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(left &gt;= right)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = left + (right-left) /<span class="number">2</span>;</span><br><span class="line">    <span class="comment">//å·¦æ•°ç»„ [left,mid] å³å­æ•°ç»„[mid+1,right]</span></span><br><span class="line">    <span class="built_in">mergeSort</span>(arr,left,mid);</span><br><span class="line">    <span class="built_in">mergeSort</span>(arr,mid+<span class="number">1</span>,right);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå¹¶</span></span><br><span class="line">    <span class="built_in">merge</span>(arr,left,mid,right);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</span></span><br><span class="line"><span class="comment">//å·¦æ•°ç»„ [left,mid] å³å­æ•°ç»„[mid+1,right]</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> left,<span class="keyword">int</span> mid,<span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">    <span class="comment">//ç”³è¯·ç©ºé—´</span></span><br><span class="line">    <span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>[right-left+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//åˆå¹¶ä¸¤ä¸ªå­æ•°ç»„</span></span><br><span class="line">    <span class="keyword">int</span> i = left,j = mid+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=mid &amp;&amp; j&lt;=right)&#123;</span><br><span class="line">        p[k++] = arr[i] &lt;= arr[j] ? arr[i++] : arr[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;=mid)&#123;</span><br><span class="line">        p[k++] = arr[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ( j&lt;=right)&#123;</span><br><span class="line">        p[k++] = arr[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŠŠæ•°æ®å¤åˆ¶å›åŸæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = left;i&lt;=right;i++)&#123;</span><br><span class="line">        arr[i] = p[i-left];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> []p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="é“¾è¡¨å½’å¹¶æ’åº">é“¾è¡¨å½’å¹¶æ’åº</h5><p><img src="/img/algorithm/ListMergeSort.png" alt="ListMergeSort"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é“¾è¡¨çš„å½’å¹¶æ’åº</span></span><br><span class="line"><span class="function">ListNode* <span class="title">sortList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">mergeSort</span>(head,<span class="literal">nullptr</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä»å¤´åˆ°å°¾è¿›è¡Œæ’åºï¼Œè¿”å›æ’åºå¥½çš„å¤´æŒ‡é’ˆ</span></span><br><span class="line"><span class="function">ListNode* <span class="title">mergeSort</span><span class="params">(ListNode* head,ListNode* tail)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!head)</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åªå‰©æœ€åä¸€ä¸ªèŠ‚ç‚¹,tailä¸è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="keyword">if</span>(head-&gt;next == tail)&#123;</span><br><span class="line">        head-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¿«æ…¢æŒ‡é’ˆå¯»æ‰¾ä¸­é—´</span></span><br><span class="line">    ListNode* slow = head,*fast =head,*mid = head;</span><br><span class="line">    <span class="keyword">while</span>(fast != tail)&#123;</span><br><span class="line">        slow = slow-&gt;next;</span><br><span class="line">        fast = fast-&gt;next;</span><br><span class="line">        <span class="keyword">if</span>(fast != tail)</span><br><span class="line">            fast = fast-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    mid = slow;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">merge</span>(<span class="built_in">mergeSort</span>(head,mid),<span class="built_in">mergeSort</span>(mid,tail));</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ListNode* <span class="title">merge</span><span class="params">(ListNode* list1,ListNode* list2)</span></span>&#123;</span><br><span class="line">    ListNode* dummyHead = <span class="keyword">new</span> <span class="built_in">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    ListNode* pre = dummyHead;</span><br><span class="line">    <span class="keyword">while</span>(list1 &amp;&amp; list2)&#123;</span><br><span class="line">        <span class="keyword">if</span>(list1-&gt;val &lt; list2-&gt;val)&#123;</span><br><span class="line">            pre-&gt;next = list1;</span><br><span class="line">            list1 = list1-&gt;next;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pre-&gt;next = list2;</span><br><span class="line">            list2 = list2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        pre = pre-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(list1)&#123;</span><br><span class="line">        pre-&gt;next = list1;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        pre-&gt;next = list2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummyHead-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹-3">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>æ—¶é—´å¤æ‚åº¦å¹³å‡ÎŸ(nlogn),å¯¹äºæ•°ç»„éœ€è¦O(n)çš„ç©ºé—´å¤æ‚åº¦ï¼Œå¯¹äºé“¾è¡¨åªéœ€è¦O(1)</li><li>å¸¸ç”¨äºç»™é“¾è¡¨æ’åº</li><li>å› ä¸ºæˆ‘ä»¬åœ¨é‡åˆ°ç›¸ç­‰çš„æ•°æ®çš„æ—¶å€™å¿…ç„¶æ˜¯æŒ‰é¡ºåºâ€œæŠ„å†™â€åˆ°è¾…åŠ©æ•°ç»„ä¸Šçš„ï¼Œæ‰€ä»¥ï¼Œå½’å¹¶æ’åºåŒæ ·æ˜¯ç¨³å®šç®—æ³•ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;å¸Œå°”æ’åº-æ’å…¥æ’åºçš„æ”¹è‰¯ç‰ˆ&quot;&gt;å¸Œå°”æ’åº(æ’å…¥æ’åºçš„æ”¹è‰¯ç‰ˆ)&lt;/h3&gt;
&lt;p&gt;åœ¨å¸Œå°”æ’åºå‡ºç°ä¹‹å‰ï¼Œè®¡ç®—æœºç•Œæ™®éå­˜åœ¨â€œæ’åºç®—æ³•ä¸å¯èƒ½çªç ´O(n2)â€çš„è§‚ç‚¹ã€‚å¸Œå°”æ’åºæ˜¯ç¬¬ä¸€ä¸ªçªç ´O(n2)çš„æ’åºç®—æ³•ï¼Œå®ƒæ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆã€‚å¸Œå°”æ’åºçš„æå‡ºï¼Œä¸»è¦åŸºäºä»¥ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://blog.hellowei.ga/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ’åº" scheme="https://blog.hellowei.ga/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ’åºç®—æ³•(ä¸€)â€”â€”å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥</title>
    <link href="https://blog.hellowei.ga/2021/12/07/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%9501/"/>
    <id>https://blog.hellowei.ga/2021/12/07/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%9501/</id>
    <published>2021-12-07T12:47:09.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<p>æ’åºç®—æ³•æ˜¯æœ€åŸºæœ¬çš„ç®—æ³•ã€‚æ’åºç®—æ³•åˆ†ä¸º<strong>å†…éƒ¨æ’åº</strong>å’Œ<strong>å¤–éƒ¨æ’åº</strong>ã€‚</p><p>å†…éƒ¨æ’åºï¼šæ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œä¸éœ€è¦è®¿é—®å¤–å­˜</p><p>å¤–éƒ¨æ’åºï¼šå› æ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ã€‚</p><p>å¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼šæ’å…¥æ’åºã€å¸Œå°”æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åºç­‰ã€‚ç”¨ä¸€å¼ å›¾æ¦‚æ‹¬ï¼š</p><p><img src="/img/algorithm/sort.png" alt="æ’åº"></p><p>åè¯è§£é‡Š:</p><ul><li>n æ•°æ®è§„æ¨¡</li><li>k æ¡¶çš„ä¸ªæ•°</li><li>In-place å ç”¨å¸¸æ•°å†…å­˜ï¼Œä¸å ç”¨é¢å¤–å†…å­˜</li><li>Out-place å ç”¨é¢å¤–å†…å­˜</li><li>ç¨³å®šæ€§ æ’åºå 2 ä¸ªç›¸ç­‰é”®å€¼çš„é¡ºåºå’Œæ’åºä¹‹å‰å®ƒä»¬çš„é¡ºåºç›¸åŒ</li></ul><h3 id="å†’æ³¡æ’åº">å†’æ³¡æ’åº</h3><p>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢&quot;æµ®&quot;åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><h4 id="ç®—æ³•æè¿°">ç®—æ³•æè¿°</h4><ol><li>æ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œåˆ™äº¤æ¢ä»–ä»¬çš„ä½ç½®</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ å¯¹åŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œ</li><li>é’ˆå¯¹æ‰€æœ‰å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ª</li><li>é‡å¤æ­¥éª¤1ï½3,çŸ¥é“æ‰€æœ‰æ’åºå®Œæˆ</li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/bubbleSort.gif" alt="å†’æ³¡æ’åº"></p><h4 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len<span class="number">-1</span>;i&gt;<span class="number">0</span>;i--)&#123;<span class="comment">// éœ€è¦æ’åºçš„é•¿åº¦ï¼Œå…±len-1æ¬¡å¾ªç¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j&lt;i;j++)&#123;<span class="comment">//ä»ç¬¬1ä¸ªå…ƒç´ åˆ°ç¬¬iä¸ªå…ƒç´ </span></span><br><span class="line">          <span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>])</span><br><span class="line">              <span class="built_in">swap</span>(arr[j],arr[j+<span class="number">1</span>]);</span><br><span class="line">        &#125;<span class="comment">//end loop j</span></span><br><span class="line">    &#125;<span class="comment">//end loop i</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>åœ¨ç›¸é‚»å…ƒç´ ç›¸ç­‰æ—¶ï¼Œå®ƒä»¬å¹¶ä¸ä¼šäº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥ï¼Œå†’æ³¡æ’åºæ˜¯ç¨³å®šæ’åº</li><li>æ¯å®Œæˆä¸€æ¬¡ç¬¬ä¸€å±‚å¾ªç¯ï¼Œä¼šä½¿å¾—å½“å‰éœ€è¦æ’åºçš„æ•°ç»„<code> arr[0]-arr[i]</code>ä¸­æœ€å¤§çš„æ•°è¢«æ”¾ç½®æœ«å°¾ä¸‹æ ‡ä¸º<code>i</code>çš„ä½ç½®</li><li>ç®—æ³•å¤æ‚åº¦æ€»æ˜¯O(n^2)ï¼Œé™¤éæœ‰åºçŠ¶æ€ä¸‹æå‰ç»“æŸï¼Œä¹Ÿéœ€è¦O(n)</li><li>å†’æ³¡æ’åºæ€è·¯ç®€å•ï¼Œä»£ç ä¹Ÿç®€å•ï¼Œç‰¹åˆ«é€‚åˆå°æ•°æ®çš„æ’åºã€‚ä½†æ˜¯ï¼Œç”±äºç®—æ³•å¤æ‚åº¦è¾ƒé«˜ï¼Œåœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ä¸é€‚åˆä½¿ç”¨ã€‚</li></ol><h4 id="ä»£ç ä¼˜åŒ–">ä»£ç ä¼˜åŒ–</h4><p>è¦ä½¿ç®—æ³•åœ¨æœ€ä½³æƒ…å†µä¸‹æœ‰O(n)å¤æ‚åº¦ï¼Œéœ€è¦åšä¸€äº›æ”¹è¿›ï¼Œå¢åŠ ä¸€ä¸ª<code>swap</code>çš„æ ‡å¿—ï¼Œå½“å‰ä¸€è½®æ²¡æœ‰è¿›è¡Œäº¤æ¢æ—¶ï¼Œè¯´æ˜æ•°ç»„å·²ç»æœ‰åºï¼Œæ²¡æœ‰å¿…è¦å†è¿›è¡Œä¸‹ä¸€è½®çš„å¾ªç¯äº†ï¼Œç›´æ¥é€€å‡ºã€‚(æ„ä¹‰ä¸å¤§)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> isSwap = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len<span class="number">-1</span>;i&gt;<span class="number">0</span>;i--)&#123;<span class="comment">// éœ€è¦æ’åºçš„é•¿åº¦ï¼Œå…±len-1æ¬¡å¾ªç¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j&lt;i;j++)&#123;<span class="comment">//ä»ç¬¬1ä¸ªå…ƒç´ åˆ°ç¬¬iä¸ªå…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">              <span class="built_in">swap</span>(arr[j],arr[j+<span class="number">1</span>]);</span><br><span class="line">              isSwap = <span class="literal">true</span>;</span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;<span class="comment">//end loop j</span></span><br><span class="line">      <span class="comment">//æ²¡æœ‰äº¤æ¢ï¼Œæå‰ç»“æŸ</span></span><br><span class="line">      <span class="keyword">if</span>(!isSwap)&#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;<span class="comment">//end loop i</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€‰æ‹©æ’åº">é€‰æ‹©æ’åº</h3><p>é€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§äº¤æ¢æ’åºç®—æ³•ï¼Œå’Œå†’æ³¡æ’åºæœ‰ä¸€å®šçš„ç›¸ä¼¼åº¦ï¼Œå¯ä»¥è®¤ä¸ºé€‰æ‹©æ’åºæ˜¯å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ã€‚</p><h4 id="ç®—æ³•æè¿°-2">ç®—æ³•æè¿°</h4><ol><li>åœ¨<strong>æœªæ’åº</strong>åºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®</li><li>ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°<strong>å·²æ’åº</strong>åºåˆ—çš„æœ«å°¾</li><li>é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•</li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º-2">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/selectionSort.gif" alt="é€‰æ‹©æ’åº"></p><h4 id="ç®—æ³•å®ç°-2">ç®—æ³•å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> minIndex;</span><br><span class="line">    <span class="comment">//æœ‰åºåºåˆ— [0,i)</span></span><br><span class="line">    <span class="comment">//æ— åºåºåˆ— [i,len)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        minIndex = i;</span><br><span class="line">        <span class="comment">//å¯»æ‰¾æ— åºåºåˆ—ä¸­ä¸­æœ€å°çš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j =i;j&lt;len;j++)</span><br><span class="line">            <span class="keyword">if</span>(arr[j] &lt; arr[min])&#123;</span><br><span class="line">              minIndex = j;</span><br><span class="line">            &#125;      </span><br><span class="line">      <span class="comment">//å°†æœ€å°å€¼ä¸æ— åºåºåˆ—ç¬¬ä¸€ä¸ªå€¼äº¤æ¢</span></span><br><span class="line">      <span class="built_in">swap</span>(arr[minIndex],arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹-2">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>é€‰æ‹©æ’åºå®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”ç”±äºåœ¨å„ç§æƒ…å†µä¸‹å¤æ‚åº¦æ³¢åŠ¨å°ï¼Œå› æ­¤ä¸€èˆ¬æ˜¯ä¼˜äºå†’æ³¡æ’åºçš„</li><li>æ•°ç»„å®ç°çš„é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„ï¼Œç”¨é“¾è¡¨å®ç°çš„é€‰æ‹©æ’åºæ˜¯ç¨³å®šçš„</li><li>ç®—æ³•å¤æ‚åº¦æ€»æ˜¯O(n^2)</li></ol><h3 id="æ’å…¥æ’åº">æ’å…¥æ’åº</h3><p>æ’å…¥æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥</p><h4 id="ç®—æ³•æè¿°-3">ç®—æ³•æè¿°</h4><ol><li>æŠŠå¾…æ’åºçš„æ•°ç»„åˆ†æˆå·²æ’åºå’Œæœªæ’åºä¸¤éƒ¨åˆ†ï¼Œåˆå§‹çš„æ—¶å€™æŠŠç¬¬ä¸€ä¸ªå…ƒç´ è®¤ä¸ºæ˜¯å·²æ’å¥½åºçš„</li><li>ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œåœ¨å·²æ’å¥½åºçš„å­æ•°ç»„ä¸­å¯»æ‰¾åˆ°è¯¥å…ƒç´ åˆé€‚çš„ä½ç½®å¹¶æ’å…¥è¯¥ä½ç½®</li><li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ è¢«æ’å…¥æœ‰åºå­æ•°ç»„ä¸­</li></ol><h4 id="åŠ¨å›¾æ¼”ç¤º-3">åŠ¨å›¾æ¼”ç¤º</h4><p><img src="/img/algorithm/insertionSort.gif" alt="æ’å…¥æ’åº"></p><h4 id="ç®—æ³•å®ç°-3">ç®—æ³•å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="comment">//æœ‰åºåºåˆ— [0,iï¼‰</span></span><br><span class="line">    <span class="comment">//æ— åºåºåˆ— [i,len)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++)&#123;</span><br><span class="line">        <span class="comment">//éœ€è¦æ’å…¥çš„å€¼</span></span><br><span class="line">        <span class="keyword">int</span> curVal = arr[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯»æ‰¾å¯ä»¥æ’å…¥çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> pos = i;</span><br><span class="line">        <span class="comment">//é€ä¸ªæ¯”è¾ƒï¼Œè‹¥arr[pos-1]å¤§äºæ’å…¥çš„å€¼åˆ™å‘åç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">while</span>(pos &gt;=<span class="number">1</span> &amp;&amp; arr[pos<span class="number">-1</span>]&gt;curVal)&#123;</span><br><span class="line">            arr[pos] = arr[pos<span class="number">-1</span>];</span><br><span class="line">            pos--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[pos] = curVal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®—æ³•ç‰¹ç‚¹-3">ç®—æ³•ç‰¹ç‚¹</h4><ol><li>ç”±äºåªéœ€è¦æ‰¾åˆ°ä¸å¤§äºå½“å‰æ•°çš„ä½ç½®è€Œå¹¶ä¸éœ€è¦äº¤æ¢ï¼Œå› æ­¤ï¼Œç›´æ¥æ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åºæ–¹æ³•</li><li>ç®—æ³•å¤æ‚åº¦æ€»æ˜¯O(n^2),åœ¨æ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¸€èˆ¬åšä¸ºå¿«é€Ÿæ’åºçš„æ‰©å……</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ’åºç®—æ³•æ˜¯æœ€åŸºæœ¬çš„ç®—æ³•ã€‚æ’åºç®—æ³•åˆ†ä¸º&lt;strong&gt;å†…éƒ¨æ’åº&lt;/strong&gt;å’Œ&lt;strong&gt;å¤–éƒ¨æ’åº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å†…éƒ¨æ’åºï¼šæ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œä¸éœ€è¦è®¿é—®å¤–å­˜&lt;/p&gt;
&lt;p&gt;å¤–éƒ¨æ’åºï¼šå› æ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://blog.hellowei.ga/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ’åº" scheme="https://blog.hellowei.ga/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>dockerå®¹å™¨cronä»»åŠ¡è¯»å–ç¯å¢ƒå˜é‡</title>
    <link href="https://blog.hellowei.ga/2021/11/28/docker%E5%AE%B9%E5%99%A8cron%E4%BB%BB%E5%8A%A1%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <id>https://blog.hellowei.ga/2021/11/28/docker%E5%AE%B9%E5%99%A8cron%E4%BB%BB%E5%8A%A1%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</id>
    <published>2021-11-28T03:13:18.000Z</published>
    <updated>2022-08-16T13:34:42.497Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2><p>â€‹å› ä¸º<em>cron</em>ä»éäº¤äº’å¼ã€éç™»å½• shell è¿è¡Œä½œä¸šã€‚æ‰€ä»¥å½“<a href="https://www.baeldung.com/cron-expressions"><em>cron</em></a>æ‰§è¡Œä½œä¸šæ—¶ï¼Œå®ƒä¸ä¼šä»<a href="https://www.baeldung.com/linux/bashrc-vs-bash-profile-vs-profile"><em>~/.bashrc</em></a><a href="https://www.baeldung.com/linux/bashrc-vs-bash-profile-vs-profile">ã€</a><a href="https://www.baeldung.com/linux/bashrc-vs-bash-profile-vs-profile"><em>~/.bash_profile</em></a><a href="https://www.baeldung.com/linux/bashrc-vs-bash-profile-vs-profile">ã€</a><a href="https://www.baeldung.com/linux/bashrc-vs-bash-profile-vs-profile"><em>/etc/profile ç­‰</em></a>æ–‡ä»¶åŠ è½½<a href="https://www.baeldung.com/linux/environment-variables">ç¯å¢ƒå˜é‡</a>ã€‚å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨å®¹å™¨å†…çš„ç¯å¢ƒå˜é‡ä½œä¸ºå‚æ•°å®šæ—¶è¿è¡Œshellè„šæœ¬æ—¶ï¼Œç”±äºæ— æ³•è¯»å–ç¯å¢ƒå˜é‡å¯¼è‡´è¿è¡Œå¤±è´¥ã€‚</p><p>ä»¥ä¸‹ä¸ºdockerå®¹å™¨çš„è§£å†³æ–¹æ¡ˆ</p><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><ol><li><p>ä¿å­˜å®¹å™¨ç¯å¢ƒå˜é‡(å¯ä»¥å†™åœ¨entrypointä¸­)</p><p>é€šè¿‡declareå‘½ä»¤å’Œgrepå‘½ä»¤æ•è·ä½ æ‰€éœ€è¦çš„ç¯å¢ƒå˜é‡è‡³/container.envæ–‡ä»¶ä¸­(å½“ç„¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä½ å¯ä»¥éšæ„å®šä¹‰)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare -p | gerp -E &#x27;VAR1|VAR2|VAR2&#x27; &gt; /container.env</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œæ—¶è½½å…¥ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶</p><p>æœ‰ä¸¤ç§æ–¹å¼è½½å…¥ã€‚</p><ol><li><p>é€šè¿‡éœ€è¦æ‰§è¡Œçš„shellè„šæœ¬è½½å…¥ï¼Œåªéœ€åœ¨shellè„šæœ¬å‰åŠ å…¥å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¯»å–å®¹å™¨è®¾å®šçš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">source /container.env</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç›´æ¥åœ¨crontabä¸­è½½å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash</span><br><span class="line">BASH_ENV=/container.env</span><br><span class="line">* * * * * root /test-cron.sh</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="cronæ³¨æ„äº‹é¡¹">cronæ³¨æ„äº‹é¡¹</h2><p>ä¸è¦å‡å®šcronçŸ¥é“æ‰€éœ€è¦çš„ç‰¹æ®Šç¯å¢ƒï¼Œå®ƒå…¶å®å¹¶ä¸çŸ¥é“ã€‚æ‰€ä»¥ä½ è¦ä¿è¯åœ¨shelllè„šæœ¬ä¸­æä¾›æ‰€æœ‰å¿…è¦çš„è·¯å¾„å’Œç¯å¢ƒå˜é‡ï¼Œé™¤äº†ä¸€äº›è‡ªåŠ¨è®¾ç½®çš„å…¨å±€å˜é‡</p><ol><li>è„šæœ¬ä¸­æ¶‰åŠæ–‡ä»¶è·¯å¾„æ—¶å†™å…¨å±€è·¯å¾„(å¦‚python é€šè¿‡which python å®šä½å…¶å…¨å±€è·¯å¾„å†å¡«å…¥)</li><li>è„šæœ¬æ‰§è¡Œå…¶ä»–ç¯å¢ƒå˜é‡æ—¶ï¼Œé€šè¿‡sourceå‘½ä»¤å¼•å…¥ç¯å¢ƒå˜é‡</li><li>å½“æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬OKï¼Œä½†æ˜¯crontabæ‰§è¡Œå¤±è´¥æ—¶ã€‚å¾ˆæœ‰å¯èƒ½ç¯å¢ƒå˜é‡å‡ºé—®é¢˜</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;â€‹	å› ä¸º&lt;em&gt;cron&lt;/em&gt;ä»éäº¤äº’å¼ã€éç™»å½• shell è¿è¡Œä½œä¸šã€‚æ‰€ä»¥å½“&lt;a href=&quot;https://www.baeldung.com/cron-expressions&quot;&gt;&lt;em&gt;cron&lt;/em&gt;&lt;/a&gt;æ‰§è¡Œä½œä¸šæ—¶ï¼Œå®ƒ</summary>
      
    
    
    
    <category term="Docker" scheme="https://blog.hellowei.ga/categories/Docker/"/>
    
    
    <category term="docker" scheme="https://blog.hellowei.ga/tags/docker/"/>
    
    <category term="cron" scheme="https://blog.hellowei.ga/tags/cron/"/>
    
    <category term="ç¯å¢ƒå˜é‡" scheme="https://blog.hellowei.ga/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(åäº”)-â€œæ•°æ®ç»“æ„â€æ¨¡å¼</title>
    <link href="https://blog.hellowei.ga/2021/11/22/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F16/"/>
    <id>https://blog.hellowei.ga/2021/11/22/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F16/</id>
    <published>2021-11-22T12:26:04.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h1>â€œæ•°æ®ç»“æ„â€æ¨¡å¼</h1><p>å¸¸å¸¸æœ‰ä¸€äº›ç»„ä»¶åœ¨å†…éƒ¨å…·æœ‰ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œå¦‚æœè®©å®¢æˆ·ç¨‹åºä¾èµ–è¿™äº›ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œå°†æå¤§åœ°ç ´åç»„ä»¶çš„å¤ç”¨ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›ç‰¹å®šæ•°æ®ç»“æ„å°è£…åœ¨å†…éƒ¨ï¼Œåœ¨å¤–éƒ¨æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œæ¥å®ç°ä¸ç‰¹å®šæ•°æ®ç»“æ„æ— å…³çš„è®¿é—®ï¼Œæ˜¯ä¸€ç§è¡Œä¹‹æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§</p><ol><li>Composite</li><li>Iterator</li><li>Chain of Resposibility</li></ol><h1>Composite</h1><h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®¢æˆ·ä»£ç è¿‡å¤šåœ°ä¾èµ–äºå¯¹è±¡å®¹å™¨å¤æ‚çš„å†…éƒ¨å®ç°ç»“æ„ï¼Œå¯¹è±¡å®¹å™¨å†…éƒ¨å®ç°ç»“æ„(è€ŒéæŠ½è±¡æ¥å£)çš„å˜åŒ–å°†å¼•èµ·å®¢æˆ·ä»£ç çš„é¢‘ç¹å˜åŒ–ï¼Œå¸¦æ¥äº†ä»£ç çš„ç»´æŠ¤æ€§ã€æ‰©å±•æ€§ç­‰å¼Šç«¯ã€‚</li><li>å¦‚ä½•å°†â€œå®¢æˆ·ä»£ç ä¸å¤æ‚çš„å¯¹è±¡å®¹å™¨ç»“æ„&quot;è§£è€¦?è®©å¯¹è±¡å®¹å™¨è‡ªå·±æ¥å®ç°è‡ªèº«çš„å¤æ‚ç»“æ„ï¼Œä»è€Œä½¿å¾—å®¢æˆ·ä»£ç å°±åƒå¤„ç†ç®€å•å¯¹è±¡ä¸€æ ·æ¥å¤„ç†å¤æ‚çš„å¯¹è±¡å®¹å™¨?</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>å°†å¯¹è±¡ç»„åˆæˆ<strong>æ ‘å½¢ç»“æ„</strong>ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚Compositeä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§(ç¨³å®š)</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/16_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span>&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Component</span>()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æ ‘èŠ‚ç‚¹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composite</span>:</span><span class="keyword">public</span> Component&#123;</span><br><span class="line">    string name;</span><br><span class="line">    list&lt;Component*&gt; elements; <span class="comment">//é€šå¸¸ä¿å­˜å¶å­ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Composite</span>(<span class="keyword">const</span> string&amp; s):<span class="built_in">name</span>(s)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Component* element)</span></span>&#123;</span><br><span class="line">        elements.<span class="built_in">push_back</span>(element);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(Component* element)</span></span>&#123;</span><br><span class="line">        elements.<span class="built_in">remove</span>(element);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">()</span> <span class="keyword">override</span></span>&#123;</span><br><span class="line">        <span class="comment">//1. å¤„ç†å½“å‰ç»“ç‚¹</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å¤„ç†å¶å­ç»“ç‚¹</span></span><br><span class="line">        <span class="comment">//å¤šæ€è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; e : elements)&#123;</span><br><span class="line">            e-&gt;<span class="built_in">process</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¶å­ç»“ç‚¹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span>:</span><span class="keyword">public</span> Component&#123;</span><br><span class="line">    string name;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Leaf</span>(<span class="keyword">const</span> string&amp; s):<span class="built_in">name</span>(s)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">()</span> <span class="keyword">override</span></span>&#123;</span><br><span class="line">        <span class="comment">//å¤„ç†å½“å‰ç»“ç‚¹</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Invoke</span><span class="params">(Component&amp; c)</span></span>&#123;</span><br><span class="line">    <span class="comment">//å°†ä¸€å¯¹å¤šè½¬åŒ–ä¸ºä¸€å¯¹ä¸€çš„å…³ç³»</span></span><br><span class="line">    c.<span class="built_in">process</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">Composite <span class="title">root</span><span class="params">(<span class="string">&quot;root&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">Composite <span class="title">treeNode1</span><span class="params">(<span class="string">&quot;treeNode1&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">Composite <span class="title">treeNode2</span><span class="params">(<span class="string">&quot;treeNode2&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">Composite <span class="title">treeNode3</span><span class="params">(<span class="string">&quot;treeNode3&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">Leaf <span class="title">leaf1</span><span class="params">(<span class="string">&quot;leaf1&quot;</span>)</span></span></span><br><span class="line"><span class="function">    Leaf <span class="title">leaf2</span><span class="params">(<span class="string">&quot;leaf2&quot;</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    root.<span class="title">add</span><span class="params">(&amp;treeNode1)</span></span>;</span><br><span class="line">    treeNode1.<span class="built_in">add</span>(&amp;treeNode2);</span><br><span class="line">    treeNode1.<span class="built_in">add</span>(&amp;treeNode3);</span><br><span class="line">    treeNode2.<span class="built_in">add</span>(&amp;leaf1);</span><br><span class="line">    treeNode3.<span class="built_in">add</span>(&amp;leaf2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Invokeå¤„ç†ä¸€è‡´æ€§</span></span><br><span class="line">    <span class="built_in">Invoke</span>(root);</span><br><span class="line">    <span class="built_in">Invoke</span>(treeNode1);</span><br><span class="line">    <span class="built_in">Invoke</span>(leaf1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>Compositeæ¨¡å¼é‡‡ç”¨æ ‘å½¢ç»“æ„æ¥å®ç°æ™®éå­˜åœ¨çš„å¯¹è±¡å®¹å™¨ï¼Œä»è€Œå°†â€˜ä¸€å¯¹å¤šâ€çš„å…³ç³»è½¬åŒ–ä¸ºâ€œä¸€å¯¹ä¸€â€çš„å…³ç³»ï¼Œä½¿å¾—å®¢æˆ·ä»£ç å¯ä»¥ä¸€è‡´åœ°(å¤ç”¨)å¤„ç†å¯¹è±¡å’Œå¯¹è±¡å®¹å™¨ï¼Œæ— éœ€å…³å¿ƒå¤„ç†çš„æ˜¯å•ä¸ªçš„å¯¹è±¡ï¼Œè¿˜æ˜¯ç»„åˆçš„å¯¹è±¡å®¹å™¨ã€‚</li><li>å°†â€œå®¢æˆ·ä»£ç ä¸å¤æ‚çš„å¯¹è±¡å®¹å™¨ç»“æ„â€è§£è€¦æ˜¯Compositeçš„æ ¸å¿ƒæ€æƒ³ï¼Œè§£è€¦ä¹‹åï¼Œå®¢æˆ·ä»£ç å°†ä¸çº¯ç²¹çš„æŠ½è±¡æ¥å£ä¸€è€Œéå¯¹è±¡å®¹å™¨çš„å†…éƒ¨å®ç°ç»“æ„ä¸€å‘ç”Ÿä¾èµ–ï¼Œä»è€Œæ›´èƒ½â€œåº”å¯¹å˜åŒ–â€ã€‚</li><li>Compositeæ¨¡å¼åœ¨å…·ä½“å®ç°ä¸­ï¼Œå¯ä»¥è®©çˆ¶å¯¹è±¡ä¸­çš„å­å¯¹è±¡åå‘è¿½æº¯;å¦‚æœçˆ¶å¯¹è±¡æœ‰é¢‘ç¹çš„éå†éœ€æ±‚ï¼Œå¯ä½¿ç”¨ç¼“å­˜æŠ€å·§æ¥æ”¹å–„æ•ˆç‡ã€‚</li></ol><h1>Iterator</h1><h2 id="è®¾è®¡åŠ¨æœº-2">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼Œé›†åˆå¯¹è±¡å†…éƒ¨ç»“æ„å¸¸å¸¸å˜åŒ–å„å¼‚ã€‚ä½†å¯¹äºè¿™äº›é›†åˆå¯¹è±¡ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸æš´éœ²å…¶å†…éƒ¨ç»“æ„çš„åŒæ—¶ï¼Œå¯ä»¥è®©å¤–éƒ¨å®¢æˆ·ä»£ç é€æ˜åœ°è®¿é—®å…¶ä¸­åŒ…å«çš„å…ƒç´ ;åŒæ—¶è¿™ç§â€œé€æ˜éå†â€ä¹Ÿä¸ºâ€œåŒä¸€ç§ç®—æ³•åœ¨å¤šç§é›†åˆå¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œâ€™â€™æä¾›äº†å¯èƒ½ã€‚</li><li>ä½¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯å°†è¿™ç§éå†æœºåˆ¶æŠ½è±¡ä¸ºâ€œè¿­ä»£å™¨å¯¹è±¡â€ä¸ºâ€œåº”å¯¹å˜åŒ–ä¸­çš„é›†åˆå¯¹è±¡â€æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼ã€‚</li></ol><h2 id="å®šä¹‰-2">å®šä¹‰</h2><blockquote><p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²(ç¨³å®š)è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</p></blockquote><h2 id="ç»“æ„-2">ç»“æ„</h2><p><img src="/img/PatternDesign/16_02.png" alt="ç»“æ„"></p><h2 id="æ€»ç»“-2">æ€»ç»“</h2><ol><li>åœ¨å¦‚ä»Šæ‹¥æœ‰STLå’Œæ³›å‹ç¼–ç¨‹çš„c++è¯­è¨€è¿™ç§æ¨¡å¼å·²è¢«å¼ƒç”¨(é¢å¯¹å¯¹è±¡çš„è¿­ä»£å™¨æ€§èƒ½æŸè€—é«˜),java,c#ä¼šç”¨åˆ°</li><li>è¿­ä»£æŠ½è±¡:è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— éœ€æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤ºã€‚</li><li>è¿­ä»£å¤šæ€:ä¸ºéå†ä¸åŒçš„é›†åˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œä»è€Œæ”¯æŒåŒæ ·çš„ç®—æ³•åœ¨ä¸åŒçš„é›†åˆç»“æ„.ä¸Šè¿›è¡Œæ“ä½œã€‚</li><li>è¿­ä»£å™¨çš„å¥å£®æ€§è€ƒè™‘:éå†çš„åŒæ—¶æ›´æ”¹è¿­ä»£å™¨æ‰€åœ¨çš„é›†åˆç»“æ„ï¼Œä¼šå¯¼è‡´é—®é¢˜ã€‚</li></ol><h1>Chain of responsibility</h1><h2 id="è®¾è®¡åŠ¨æœº-3">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚å¯èƒ½è¢«å¤šä¸ªå¯¹è±¡å¤„ç†ï¼Œä½†æ˜¯æ¯ä¸ªè¯·æ±‚åœ¨è¿è¡Œæ—¶åªèƒ½æœ‰ä¸€ä¸ªæ¥å—è€…ï¼Œå¦‚æœæ˜¾å¼æŒ‡å®šï¼Œå°†å¿…ä¸å¯å°‘åœ°å¸¦æ¥è¯·æ±‚å‘é€è€…ä¸æ¥å—è€…çš„ç´§è€¦åˆã€‚<br>2.å¦‚ä½•ä½¿è¯·æ±‚çš„å‘é€è€…ä¸éœ€è¦æŒ‡å®šå…·ä½“çš„æ¥å—è€…?è®©è¯·æ±‚çš„æ¥å—è€…è‡ªå·±åœ¨è¿è¡Œæ—¶å†³å®šæ¥å¤„ç†è¯·æ±‚ï¼Œä»è€Œä½¿ä¸¤è€…è§£è€¦ã€‚</li></ol><h2 id="å®šä¹‰-3">å®šä¹‰</h2><blockquote><p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p></blockquote><h2 id="ç»“æ„-3">ç»“æ„</h2><p><img src="/img/PatternDesign/16_03.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­-2">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title">RequestType</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    REQ_HANDLER1,</span><br><span class="line">    REQ_HANDLER2,</span><br><span class="line">    REQ_HANDLER3</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Reqest</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    string description;</span><br><span class="line">    RequestType reqType;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Reqest</span>(<span class="keyword">const</span> string &amp; desc, RequestType type) : <span class="built_in">description</span>(desc), <span class="built_in">reqType</span>(type) &#123;&#125;</span><br><span class="line">    <span class="function">RequestType <span class="title">getReqType</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> reqType; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> string&amp; <span class="title">getDescription</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> description; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChainHandler</span>&#123;</span></span><br><span class="line">    </span><br><span class="line">    ChainHandler *nextChain;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendReqestToNextHandler</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nextChain != <span class="literal">nullptr</span>)</span><br><span class="line">            nextChain-&gt;<span class="built_in">handle</span>(req);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">canHandleRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">processRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ChainHandler</span>() &#123; nextChain = <span class="literal">nullptr</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setNextChain</span><span class="params">(ChainHandler *next)</span> </span>&#123; nextChain = next; &#125;</span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">handle</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">canHandleRequest</span>(req))</span><br><span class="line">            <span class="built_in">processRequest</span>(req);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">sendReqestToNextHandler</span>(req);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler1</span> :</span> <span class="keyword">public</span> ChainHandler&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canHandleRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> req.<span class="built_in">getReqType</span>() == RequestType::REQ_HANDLER1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">processRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Handler1 is handle reqest: &quot;</span> &lt;&lt; req.<span class="built_in">getDescription</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler2</span> :</span> <span class="keyword">public</span> ChainHandler&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canHandleRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> req.<span class="built_in">getReqType</span>() == RequestType::REQ_HANDLER2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">processRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Handler2 is handle reqest: &quot;</span> &lt;&lt; req.<span class="built_in">getDescription</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler3</span> :</span> <span class="keyword">public</span> ChainHandler&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canHandleRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> req.<span class="built_in">getReqType</span>() == RequestType::REQ_HANDLER3;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">processRequest</span><span class="params">(<span class="keyword">const</span> Reqest &amp; req)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Handler3 is handle reqest: &quot;</span> &lt;&lt; req.<span class="built_in">getDescription</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Handler1 h1;</span><br><span class="line">    Handler2 h2;</span><br><span class="line">    Handler3 h3;</span><br><span class="line">    h1.<span class="built_in">setNextChain</span>(&amp;h2);</span><br><span class="line">    h2.<span class="built_in">setNextChain</span>(&amp;h3);</span><br><span class="line">    </span><br><span class="line">    <span class="function">Reqest <span class="title">req</span><span class="params">(<span class="string">&quot;process task ... &quot;</span>, RequestType::REQ_HANDLER3)</span></span>;</span><br><span class="line">    h1.<span class="built_in">handle</span>(req);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“-3">æ€»ç»“</h2><ol><li>Chain of Responsibilityæ¨¡å¼çš„åº”ç”¨åœºåˆåœ¨äºâ€œä¸€ä¸ªè¯·æ±‚å¯èƒ½æœ‰å¤šä¸ªæ¥å—è€…ï¼Œä½†æ˜¯æœ€åçœŸæ­£çš„æ¥å—è€…åªæœ‰ä¸€ä¸ªâ€ï¼Œè¿™æ—¶å€™è¯·æ±‚å‘é€è€…ä¸æ¥å—è€…çš„è€¦åˆæœ‰å¯èƒ½å‡ºç°â€œå˜åŒ–è„†å¼±â€çš„ç—‡çŠ¶ï¼ŒèŒè´£é“¾çš„ç›®çš„å°±æ˜¯å°†äºŒè€…è§£è€¦ï¼Œä»è€Œæ›´å¥½åœ°åº”å¯¹å˜åŒ–ã€‚</li><li>åº”ç”¨äº†Chain of Responsibilityæ¨¡å¼åï¼Œå¯¹è±¡çš„èŒè´£åˆ†æ´¾å°†æ›´å…·çµæ´»æ€§ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ /ä¿®æ”¹è¯·æ±‚çš„å¤„ç†èŒè´£ã€‚</li><li>å¦‚æœè¯·æ±‚ä¼ é€’åˆ°èŒè´£é“¾çš„æœ«å°¾ä»å¾—ä¸åˆ°å¤„ç†ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªåˆç†çš„ç¼ºçœæœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯æ¯ä¸€ä¸ªæ¥å—å¯¹è±¡çš„è´£ä»»ï¼Œè€Œä¸æ˜¯å‘å‡ºè¯·æ±‚çš„å¯¹è±¡çš„è´£ä»»ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;â€œæ•°æ®ç»“æ„â€æ¨¡å¼&lt;/h1&gt;
&lt;p&gt;å¸¸å¸¸æœ‰ä¸€äº›ç»„ä»¶åœ¨å†…éƒ¨å…·æœ‰ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œå¦‚æœè®©å®¢æˆ·ç¨‹åºä¾èµ–è¿™äº›ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œå°†æå¤§åœ°ç ´åç»„ä»¶çš„å¤ç”¨ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›ç‰¹å®šæ•°æ®ç»“æ„å°è£…åœ¨å†…éƒ¨ï¼Œåœ¨å¤–éƒ¨æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œæ¥å®ç°ä¸ç‰¹å®šæ•°æ®ç»“æ„æ— å…³çš„è®¿é—®ï¼Œæ˜¯ä¸€ç§è¡Œä¹‹æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§&lt;/</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(åå››)-Memento</title>
    <link href="https://blog.hellowei.ga/2021/11/17/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F15/"/>
    <id>https://blog.hellowei.ga/2021/11/17/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F15/</id>
    <published>2021-11-17T14:45:19.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›å¯¹è±¡çš„çŠ¶æ€åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ç”±äºæŸç§éœ€è¦ï¼Œè¦æ±‚ç¨‹åºèƒ½å¤Ÿå›æº¯åˆ°å¯¹è±¡ä¹‹å‰å¤„äºæŸä¸ªç‚¹æ—¶çš„çŠ¶æ€ã€‚å¦‚æœä½¿ç”¨ä¸€äº›å…¬æœ‰æ¥å£æ¥è®©å…¶ä»–å¯¹è±¡å¾—åˆ°å¯¹è±¡çš„çŠ¶æ€ï¼Œä¾¿ä¼šæš´éœ²å¯¹è±¡çš„ç»†èŠ‚å®ç°ã€‚</li><li>å¦‚ä½•å®ç°å¯¹è±¡çŠ¶æ€çš„è‰¯å¥½ä¿å­˜ä¸æ¢å¤?ä½†åŒæ—¶åˆä¸ä¼šå› æ­¤è€Œç ´åå¯¹è±¡æœ¬èº«çš„å°è£…æ€§ã€‚</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/15_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  çŠ¶æ€å¿«ç…§</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Memento</span>&#123;</span></span><br><span class="line">    string state;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Memento</span>(<span class="keyword">const</span> string&amp; s):<span class="built_in">state</span>(s)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">string <span class="title">getState</span><span class="params">()</span><span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setState</span><span class="params">(<span class="keyword">const</span> string&amp; s)</span></span>&#123;</span><br><span class="line">        state = s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Originator</span>&#123;</span></span><br><span class="line">    string state;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Originator</span>()&#123;&#125;</span><br><span class="line">    Memento createMemento&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Memento</span>(state);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setMemento</span><span class="params">(Memento memento)</span></span>&#123;</span><br><span class="line">        state = memento.<span class="built_in">getState</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Originator originator;</span><br><span class="line">    <span class="comment">//æ•è·å¯¹è±¡çŠ¶æ€ï¼Œå­˜å‚¨å¿«ç…§</span></span><br><span class="line">    Memento m = originator.<span class="built_in">createMemento</span>();</span><br><span class="line">    <span class="comment">//æ¢å¤å¿«ç…§</span></span><br><span class="line">    originator.<span class="built_in">setMemento</span>(m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>å¤‡å¿˜å½•(Memento)å­˜å‚¨åŸå‘å™¨(Originator)å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œåœ¨éœ€è¦æ—¶æ¢å¤åŸå‘å™¨çŠ¶æ€ã€‚</li><li>Mementoæ¨¡å¼çš„æ ¸å¿ƒæ˜¯ä¿¡æ¯éšè—ï¼Œå³Originatoréœ€è¦å‘å¤–æ¥éšè—ä¿¡æ¯ï¼Œä¿æŒå…¶å°è£…æ€§ã€‚ä½†åŒæ—¶åˆéœ€è¦å°†çŠ¶æ€ä¿æŒåˆ°å¤–ç•Œ(Memento) ã€‚</li><li>ç”±äºç°ä»£è¯­è¨€è¿è¡Œæ—¶ï¼ˆå¦‚C#ã€Javaç­‰ï¼‰éƒ½å…·æœ‰ç›¸å½“çš„å¯¹è±¡åºåˆ—åŒ–æ”¯æŒï¼Œå› æ­¤å¾€å¾€é‡‡ç”¨æ•ˆç‡è¾ƒé«˜ã€åˆè¾ƒå®¹æ˜“æ­£ç¡®å®ç°çš„åºåˆ—åŒ–æ–¹æ¡ˆæ¥ä¹°ç°Mementoæ¨¡å¼ã€‚</li></ol><h2 id="çŠ¶æ€å˜åŒ–-æ¨¡å¼">&quot;çŠ¶æ€å˜åŒ–&quot;æ¨¡å¼</h2><blockquote><p>åœ¨ç»„ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›å¯¹è±¡çš„çŠ¶æ€ç»å¸¸é¢ä¸´å˜åŒ–ï¼Œå¦‚ä½•å¯¹è¿™äº›å˜åŒ–è¿›è¡Œæœ‰æ•ˆçš„ç®¡ç†?åŒæ—¶åˆç»´æŒé«˜å±‚æ¨¡å—çš„ç¨³å®š?â€œçŠ¶æ€å˜åŒ–&quot;æ¨¡å¼ä¸ºè¿™ä¸€é—®é¢˜æä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><h3 id="å…¸å‹æ¨¡å¼">å…¸å‹æ¨¡å¼</h3><ol><li><a href="/2021/11/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F14/">State</a></li><li><a href="/2021/11/17/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F15/">Memento</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›å¯¹è±¡çš„çŠ¶æ€åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ç”±äºæŸç§éœ€è¦ï¼Œè¦æ±‚ç¨‹åºèƒ½å¤Ÿå›æº¯åˆ°å¯¹è±¡ä¹‹å‰å¤„äºæŸä¸ªç‚¹æ—¶çš„çŠ¶æ€ã€‚å¦‚æœä½¿ç”¨ä¸€äº›å…¬æœ‰æ¥å£æ¥è®©å…¶ä»–å¯¹è±¡å¾—åˆ°å¯¹è±¡çš„çŠ¶æ€ï¼Œä¾¿ä¼šæš´éœ²å¯¹è±¡çš„ç»†èŠ‚å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å®ç°å¯¹è±¡</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(åä¸‰)-State</title>
    <link href="https://blog.hellowei.ga/2021/11/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F14/"/>
    <id>https://blog.hellowei.ga/2021/11/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F14/</id>
    <published>2021-11-16T08:53:02.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›å¯¹è±¡çš„çŠ¶æ€å¦‚æœæ”¹å˜ï¼Œå…¶è¡Œä¸ºä¹Ÿä¼šéšä¹‹ï¼Œè€Œå‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚æ–‡æ¡£å¤„äºåªè¯»çŠ¶æ€ï¼Œå…¶æ”¯æŒçš„è¡Œä¸ºå’Œè¯»å†™çŠ¶æ€æ”¯æŒçš„è¡Œä¸ºå°±å¯èƒ½å®Œå…¨ä¸åŒã€‚</li><li>å¦‚ä½•åœ¨è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„çŠ¶æ€æ¥é€æ˜åœ°æ›´æ”¹å¯¹è±¡çš„è¡Œä¸º?è€Œä¸ä¼šä¸ºå¯¹è±¡æ“ä½œå’ŒçŠ¶æ€è½¬åŒ–ä¹‹é—´å¼•å…¥ç´§è€¦åˆ?</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚ä»è€Œä½¿å¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å…¶è¡Œä¸ºã€‚</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/14_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><h3 id="ä¼ ç»Ÿ">ä¼ ç»Ÿ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">NetworkState</span>&#123;</span></span><br><span class="line">    NetworkOpen,</span><br><span class="line">    NetworkClose,</span><br><span class="line">    NetworkConnect,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkProcess</span>&#123;</span></span><br><span class="line">    NetworkState state;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(state == NetworkOpen)&#123;</span><br><span class="line">            <span class="comment">//do something</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">//state change</span></span><br><span class="line">            state  = NetworkClose;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(state == NetworkClose)&#123;</span><br><span class="line">            <span class="comment">//do something</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">//state change</span></span><br><span class="line">            state  = NetworkConnect;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(state == NetworkConnect)&#123;</span><br><span class="line">            <span class="comment">//do something</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">//state change</span></span><br><span class="line">            state  = NetworkOpen;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(state == NetworkOpen)&#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(state == NetworkClose)&#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            state  = NetworkConnect;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(state == NetworkConnect)&#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            state  = NetworkOpen;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çŠ¶æ€æ¨¡å¼">çŠ¶æ€æ¨¡å¼</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OpenState</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CloseState</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConnectState</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkState</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NetworkState* pNext; <span class="comment">//next state</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æä¾›æ¥å£ï¼Œç­‰å¾…å­ç±»é‡å†™</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">operator1</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">operator2</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">NetworkState</span>()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¼€å¯çŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OpenState</span>:</span><span class="keyword">public</span> NetworkState&#123;</span><br><span class="line">    <span class="comment">//å•ä¾‹ï¼Œåªæœ‰ä¸€ä¸ªçŠ¶æ€å®ä¾‹</span></span><br><span class="line">    <span class="keyword">static</span> NetworkState* m_instance;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> NetworkState* <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            m_instance = <span class="keyword">new</span> <span class="built_in">OpenState</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m_instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        <span class="comment">//state change</span></span><br><span class="line">        pNext  = CloseState::<span class="built_in">getInstance</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…³é—­çŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CloseState</span>:</span><span class="keyword">public</span> NetworkState&#123;</span><br><span class="line">    <span class="comment">//å•ä¾‹ï¼Œåªæœ‰ä¸€ä¸ªçŠ¶æ€å®ä¾‹</span></span><br><span class="line">    <span class="keyword">static</span> NetworkState* m_instance;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> NetworkState* <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            m_instance = <span class="keyword">new</span> <span class="built_in">CloseState</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m_instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        <span class="comment">//state change</span></span><br><span class="line">        pNext  = ConnectState::<span class="built_in">getInstance</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿æ¥çŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConnectState</span>:</span><span class="keyword">public</span> NetworkState&#123;</span><br><span class="line">    <span class="comment">//å•ä¾‹ï¼Œåªæœ‰ä¸€ä¸ªçŠ¶æ€å®ä¾‹</span></span><br><span class="line">    <span class="keyword">static</span> NetworkState* m_instance;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> NetworkState* <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            m_instance = <span class="keyword">new</span> <span class="built_in">ConnectState</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m_instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *******</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        <span class="comment">//state change</span></span><br><span class="line">        pNext  = OpenState::<span class="built_in">getInstance</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">NetworkState* OpenState::m_instance = <span class="literal">nullptr</span>;</span><br><span class="line">NetworkState* CloseState::m_instance = <span class="literal">nullptr</span>;</span><br><span class="line">NetworkState* ConnectState::m_instance = <span class="literal">nullptr</span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkProcessor</span>&#123;</span></span><br><span class="line">    NetworkState* pState;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">NetworkProcessor</span>(NetworkState* state):<span class="built_in">pState</span>(state)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        pState-&gt;<span class="built_in">operator1</span>();</span><br><span class="line">        pState = pState-&gt;pNext;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>Stateæ¨¡å¼å°†æ‰€æœ‰ä¸ä¸€ä¸ªç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºéƒ½æ”¾å…¥ä¸€ä¸ªStateçš„å­ç±»å¯¹è±¡ä¸­ï¼Œåœ¨å¯¹è±¡çŠ¶æ€åˆ‡æ¢æ—¶ï¼Œåˆ‡æ¢ç›¸åº”çš„å¯¹è±¡;ä½†åŒæ—¶ç»´æŒStateçš„æ¥å£ï¼Œè¿™æ ·å®ç°äº†å…·ä½“æ“ä½œä¸çŠ¶æ€è½¬æ¢ä¹‹é—´çš„è§£è€¦ã€‚</li><li>ä¸ºä¸åŒçš„çŠ¶æ€å¼•å…¥ä¸åŒçš„å¯¹è±¡ä½¿å¾—çŠ¶æ€è½¬æ¢å˜å¾—æ›´åŠ æ˜ç¡®ï¼Œè€Œä¸”å¯ä»¥ä¿è¯ä¸ä¼šå‡ºç°çŠ¶æ€ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› ä¸ºè½¬æ¢æ˜¯åŸå­æ€§çš„â€”â€”å³è¦ä¹ˆå½»åº•è½¬æ¢è¿‡æ¥ï¼Œè¦ä¹ˆä¸è½¬æ¢ã€‚</li><li>å¦‚æœStateå¯¹è±¡æ²¡æœ‰å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå„ä¸ªä¸Šä¸‹æ–‡å¯ä»¥å…±äº«åŒä¸€ä¸ªStateå¯¹è±¡ï¼Œä»è€ŒèŠ‚çœå¯¹è±¡å¼€é”€ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›å¯¹è±¡çš„çŠ¶æ€å¦‚æœæ”¹å˜ï¼Œå…¶è¡Œä¸ºä¹Ÿä¼šéšä¹‹ï¼Œè€Œå‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚æ–‡æ¡£å¤„äºåªè¯»çŠ¶æ€ï¼Œå…¶æ”¯æŒçš„è¡Œä¸ºå’Œè¯»å†™çŠ¶æ€æ”¯æŒçš„è¡Œä¸ºå°±å¯èƒ½å®Œå…¨ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•åœ¨è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„çŠ¶æ€æ¥é€æ˜åœ°æ›´æ”¹å¯¹è±¡çš„è¡Œä¸º?è€Œä¸</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(åäºŒ)-Mediator</title>
    <link href="https://blog.hellowei.ga/2021/11/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F13/"/>
    <id>https://blog.hellowei.ga/2021/11/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F13/</id>
    <published>2021-11-15T02:07:12.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå‡ºç°å¤šä¸ªå¯¹è±¡äº’ç›¸å…³è”äº¤äº’çš„æƒ…å†µï¼Œå¯¹è±¡ä¹‹é—´å¸¸å¸¸ä¼šç»´æŒä¸€ç§å¤æ‚çš„å¼•ç”¨å…³ç³»ï¼Œå¦‚æœé‡åˆ°ä¸€äº›éœ€æ±‚çš„æ›´æ”¹ï¼Œè¿™ç§ç›´æ¥çš„å¼•ç”¨å…³ç³»å°†é¢ä¸´ä¸æ–­çš„å˜åŒ–ã€‚</li><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä½¿ç”¨ä¸€ä¸ªâ€œä¸­ä»‹å¯¹è±¡&quot;æ¥ç®¡ç†å¯¹è±¡é—´çš„å…³è”å…³ç³»ï¼Œé¿å…ç›¸äº’äº¤äº’çš„å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå¼•ç”¨å…³ç³»ï¼Œä»è€Œæ›´å¥½åœ°æŠµå¾¡å˜åŒ–ã€‚</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…(å°è£…å˜åŒ–)ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼çš„ç›¸äº’å¼•ç”¨(ç¼–è¯‘æ—¶ä¾èµ–â†’è¿è¡Œæ—¶ä¾èµ–)ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£(ç®¡ç†å˜åŒ–)ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/13_01.png" alt="ç»“æ„"></p><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>å°†å¤šä¸ªå¯¹è±¡é—´å¤æ‚çš„å…³è”å…³ç³»è§£è€¦ï¼ŒMediatoræ¨¡å¼å°†å¤šä¸ªå¯¹è±¡é—´çš„æ§åˆ¶é€»è¾‘è¿›è¡Œé›†ä¸­ç®¡ç†ï¼Œå˜â€œå¤šä¸ªå¯¹è±¡äº’ç›¸å…³è”&quot;ä¸ºâ€œå¤šä¸ªå¯¹è±¡å’Œä¸€ä¸ªä¸­ä»‹è€…å…³è”â€ï¼Œç®€åŒ–äº†ç³»ç»Ÿçš„ç»´æŠ¤ï¼ŒæŠµå¾¡äº†å¯èƒ½çš„å˜åŒ–ã€‚</li><li>éšç€æ§åˆ¶é€»è¾‘çš„å¤æ‚åŒ–ï¼ŒMediatorå…·ä½“å¯¹è±¡çš„å®ç°å¯èƒ½ç›¸å½“å¤æ‚ã€‚è¿™æ—¶å€™å¯ä»¥å¯¹Mediatorå¯¹è±¡è¿›è¡Œåˆ†è§£å¤„ç†ã€‚</li><li>FaÃ§adeæ¨¡å¼æ˜¯è§£è€¦ç³»ç»Ÿé—´(å•å‘)çš„å¯¹è±¡å…³è”å…³ç³»;ediatoræ¨¡å¼æ˜¯è§£è€¦ç³»ç»Ÿå†…å„ä¸ªå¯¹è±¡ä¹‹é—´(åŒå‘)çš„å…³è”å…³ç³»ã€‚</li></ol><h2 id="æ¥å£éš”ç¦»-æ¨¡å¼">&quot;æ¥å£éš”ç¦»&quot;æ¨¡å¼</h2><blockquote><p>åœ¨ç»„ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›æ¥å£ä¹‹é—´ç›´æ¥çš„ä¾èµ–å¸¸å¸¸ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ã€ç”šè‡³æ ¹æœ¬æ— æ³•å®ç°ã€‚é‡‡ç”¨æ·»åŠ ä¸€å±‚é—´æ¥ï¼ˆç¨³å®šï¼‰æ¥å£ï¼Œæ¥éš”ç¦»æœ¬æ¥äº’ç›¸ç´§å¯†å…³è”çš„æ¥å£æ˜¯ä¸€ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><h3 id="å…¸å‹æ¨¡å¼">å…¸å‹æ¨¡å¼</h3><ol><li><a href="/2021/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F10/">FaÃ§ade</a>    -è§£å†³ç³»ç»Ÿå†…å¤–çš„æ¥å£é—®é¢˜</li><li><a href="/2021/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F11/">Proxy</a>     -è§£å†³ä¸¤å¯¹è±¡ä¹‹é—´çš„æ¥å£é—®é¢˜</li><li><a href="/2021/11/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F12/">Adapter</a>   -è§£å†³æ–°è€æ¥å£ä¹‹é—´è½¬æ¢é—®é¢˜</li><li><a href="/2021/11/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F13/">Mediator</a>  -è§£å†³å¤šä¸ªå¯¹è±¡å¤æ‚å…³è”é—®é¢˜</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå‡ºç°å¤šä¸ªå¯¹è±¡äº’ç›¸å…³è”äº¤äº’çš„æƒ…å†µï¼Œå¯¹è±¡ä¹‹é—´å¸¸å¸¸ä¼šç»´æŒä¸€ç§å¤æ‚çš„å¼•ç”¨å…³ç³»ï¼Œå¦‚æœé‡åˆ°ä¸€äº›éœ€æ±‚çš„æ›´æ”¹ï¼Œè¿™ç§ç›´æ¥çš„å¼•ç”¨å…³ç³»å°†é¢ä¸´ä¸æ–­çš„å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä½¿ç”¨ä¸€ä¸ªâ€œä¸­ä»‹å¯¹è±¡&amp;</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(åä¸€)-Adapter</title>
    <link href="https://blog.hellowei.ga/2021/11/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F12/"/>
    <id>https://blog.hellowei.ga/2021/11/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F12/</id>
    <published>2021-11-15T01:40:17.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç”±äºåº”ç”¨ç¯å¢ƒçš„å˜åŒ–ï¼Œå¸¸å¸¸éœ€è¦å°†â€œä¸€äº›ç°å­˜çš„å¯¹è±¡â€æ”¾åœ¨æ–°çš„ç¯å¢ƒä¸­åº”ç”¨ï¼Œä½†æ˜¯æ–°ç¯å¢ƒè¦æ±‚çš„æ¥å£æ˜¯è¿™äº›ç°å­˜å¯¹è±¡æ‰€ä¸æ»¡è¶³çš„ã€‚</li><li>å¦‚ä½•åº”å¯¹è¿™ç§â€œè¿ç§»çš„å˜åŒ–&quot;?å¦‚ä½•æ—¢èƒ½åˆ©ç”¨ç°æœ‰å¯¹è±¡çš„è‰¯å¥½å®ç°ï¼ŒåŒæ—¶åˆèƒ½æ»¡è¶³æ–°çš„åº”ç”¨ç¯å¢ƒæ‰€è¦æ±‚çš„æ¥å£?</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚Adapteræ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/12_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é—ç•™æ¥å£(è€æ¥å£)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IAdaptee</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> data)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">bar</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é—ç•™ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Oldclass</span> :</span> <span class="keyword">public</span> IAdaptee&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> data)</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">bar</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›®æ ‡æ¥å£(æ–°æ¥å£)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ITarget</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">porcess</span><span class="params">()</span></span>=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹è±¡é€‚é…å™¨(ç»§æ‰¿ï¼‹ç»„åˆ)</span></span><br><span class="line"><span class="comment">//ç»§æ‰¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> :</span><span class="keyword">public</span> ITarget&#123; </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">//ç»„åˆ</span></span><br><span class="line">    IAdaptee* pAdaptee;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Adapter</span>(IAdaptee* adaptee):<span class="built_in">pAdaptee</span>(adaptee)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">porcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ—§æ¥å£</span></span><br><span class="line">        <span class="built_in">foo</span>();</span><br><span class="line">        <span class="built_in">bar</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»é€‚é…å™¨ å¤šç»§æ‰¿(ä¸æ¨èä½¿ç”¨)</span></span><br><span class="line"><span class="comment">//ç¼ºä¹çµæ´»æ€§ï¼Œä¸æ˜¯é’ˆå¯¹æ¥å£ï¼Œå®šæ­»åœ¨äº†Oldclass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter1</span> :</span><span class="keyword">public</span> ITarget,<span class="keyword">protected</span> Oldclass&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    IAdaptee* pAdaptee = <span class="keyword">new</span> <span class="built_in">Oldclass</span>();</span><br><span class="line">    ITarget* pTarget = <span class="keyword">new</span> <span class="built_in">Adapter</span>(pAdaptee);</span><br><span class="line">    pTarget-&gt;<span class="built_in">process</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li><p>Adapteræ¨¡å¼ä¸»è¦åº”ç”¨äºâ€œå¸Œæœ›å¤ç”¨ä¸€äº›ç°å­˜çš„ç±»ï¼Œä½†æ˜¯æ¥å£åˆä¸å¤ç”¨ç¯å¢ƒè¦æ±‚ä¸ä¸€è‡´çš„æƒ…å†µâ€ï¼Œåœ¨é—ç•™ä»£ç å¤ç”¨ã€ç±»åº“è¿ç§»ç­‰æ–¹é¢éå¸¸æœ‰ç”¨ã€‚</p></li><li><p>-GoF 23å®šä¹‰äº†ä¸¤ç§Adapteræ¨¡å¼çš„å®ç°ç»“æ„:å¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨ã€‚ä½†ç±»é€‚é…å™¨é‡‡ç”¨â€œå¤šç»§æ‰¿&quot;çš„å®ç°æ–¹å¼ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚å¯¹è±¡é€‚é…å™¨é‡‡ç”¨â€œå¯¹è±¡ç»„åˆâ€çš„æ–¹å¼ï¼Œæ›´ç¬¦åˆæ¾è€¦åˆç²¾ç¥ã€‚</p></li><li><p>Adapteræ¨¡å¼å¯ä»¥å®ç°çš„éå¸¸çµæ´»ï¼Œä¸å¿…æ‹˜æ³¥äºGof23ä¸­å®šä¹‰çš„ä¸¤ç§ç»“æ„ã€‚ä¾‹å¦‚ï¼Œå®Œå…¨å¯ä»¥å°†Adapteræ¨¡å¼ä¸­çš„â€œç°å­˜å¯¹è±¡&quot;ä½œä¸ºæ–°çš„æ¥å£æ–¹æ³•å‚æ•°ï¼Œæ¥è¾¾åˆ°é€‚é…çš„ç›®çš„ã€‚</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç”±äºåº”ç”¨ç¯å¢ƒçš„å˜åŒ–ï¼Œå¸¸å¸¸éœ€è¦å°†â€œä¸€äº›ç°å­˜çš„å¯¹è±¡â€æ”¾åœ¨æ–°çš„ç¯å¢ƒä¸­åº”ç”¨ï¼Œä½†æ˜¯æ–°ç¯å¢ƒè¦æ±‚çš„æ¥å£æ˜¯è¿™äº›ç°å­˜å¯¹è±¡æ‰€ä¸æ»¡è¶³çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•åº”å¯¹è¿™ç§â€œè¿ç§»çš„å˜åŒ–&amp;quot;?å¦‚ä½•æ—¢èƒ½åˆ©ç”¨ç°æœ‰å¯¹è±¡çš„è‰¯å¥½å®</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(å)-Proxy</title>
    <link href="https://blog.hellowei.ga/2021/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F11/"/>
    <id>https://blog.hellowei.ga/2021/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F11/</id>
    <published>2021-11-10T12:50:26.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œæœ‰äº›å¯¹è±¡ç”±äºæŸç§åŸå› (æ¯”å¦‚å¯¹è±¡åˆ›å»ºçš„å¼€é”€å¾ˆå¤§ï¼Œæˆ–è€…æŸäº›æ“ä½œéœ€è¦å®‰å…¨æ§åˆ¶ï¼Œæˆ–è€…éœ€è¦è¿›ç¨‹å¤–çš„è®¿é—®ç­‰)ç›´æ¥è®¿é—®ä¼šç»™ä½¿ç”¨è€…ã€æˆ–è€…ç³»ç»Ÿç»“æ„å¸¦æ¥å¾ˆå¤šéº»çƒ¦ã€‚</li><li>å¦‚ä½•åœ¨ä¸å¤±å»é€æ˜æ“ä½œå¯¹è±¡çš„åŒæ—¶æ¥ç®¡ç†/æ§åˆ¶è¿™äº›å¯¹è±¡ç‰¹æœ‰çš„å¤<br>æ‚æ€§?å¢åŠ ä¸€å±‚é—´æ¥å±‚æ˜¯è½¯ä»¶å¼€å‘ä¸­å¸¸è§çš„è§£å†³æ–¹å¼ã€‚</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶(éš”ç¦»ï¼Œä½¿ç”¨æ¥å£)å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/11_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><h3 id="ä¼ ç»Ÿ">ä¼ ç»Ÿ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ISubject</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span>:</span> <span class="keyword">public</span> ISubject&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClientApp</span>&#123;</span></span><br><span class="line">    </span><br><span class="line">    ISubject* subject;</span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">    <span class="built_in">ClientApp</span>()&#123;</span><br><span class="line">        subject=<span class="keyword">new</span> <span class="built_in">RealSubject</span>();</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">DoTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        subject-&gt;<span class="built_in">process</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ISubject</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Proxyçš„è®¾è®¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubjectProxy</span>:</span> <span class="keyword">public</span> ISubject&#123;  </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//å¯¹RealSubjectçš„ä¸€ç§é—´æ¥è®¿é—®</span></span><br><span class="line">        <span class="comment">//....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClientApp</span>&#123;</span></span><br><span class="line">    </span><br><span class="line">    ISubject* subject;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:  </span><br><span class="line">    <span class="built_in">ClientApp</span>()&#123;</span><br><span class="line">        subject=<span class="keyword">new</span> <span class="built_in">SubjectProxy</span>();</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">DoTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        subject-&gt;<span class="built_in">process</span>();      </span><br><span class="line">        <span class="comment">//....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>â€œå¢åŠ ä¸€å±‚é—´æ¥å±‚â€™æ˜¯è½¯ä»¶ç³»ç»Ÿä¸­å¯¹è®¸å¤šå¤æ‚é—®é¢˜çš„ä¸€ç§å¸¸è§è§£å†³æ–¹æ³•ã€‚åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œç›´æ¥ä½¿ç”¨æŸäº›å¯¹è±¡ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼Œä½œä¸ºé—´æ¥å±‚çš„proxyå¯¹è±¡ä¾¿æ˜¯è§£å†³è¿™ä¸€é—®é¢˜çš„å¸¸ç”¨æ‰‹æ®µã€‚</li><li>å…·ä½“proxyè®¾è®¡æ¨¡å¼çš„å®ç°æ–¹æ³•ã€å®ç°ç²’åº¦éƒ½ç›¸å·®å¾ˆå¤§ï¼Œæœ‰äº›å¯èƒ½å¯¹å•ä¸ªå¯¹è±¡åšç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¦‚copy-on-writeæŠ€æœ¯ï¼Œ æœ‰äº›å¯èƒ½å¯¹ç»„ä»¶æ¨¡å—æä¾›æŠ½è±¡ä»£ç†å±‚,åœ¨æ¶æ„å±‚æ¬¡å¯¹å¯¹è±¡åšproxyã€‚</li><li>Proxyå¹¶ä¸ä¸€å®šè¦æ±‚ä¿æŒæ¥å£å®Œæ•´çš„ä¸€è‡´æ€§ï¼Œåªè¦èƒ½å¤Ÿå®ç°é—´æ¥æ§<br>åˆ¶ï¼Œæœ‰æ—¶å€™æŸåŠä¸€äº›é€æ˜æ€§æ˜¯å¯ä»¥æ¥å—çš„ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œæœ‰äº›å¯¹è±¡ç”±äºæŸç§åŸå› (æ¯”å¦‚å¯¹è±¡åˆ›å»ºçš„å¼€é”€å¾ˆå¤§ï¼Œæˆ–è€…æŸäº›æ“ä½œéœ€è¦å®‰å…¨æ§åˆ¶ï¼Œæˆ–è€…éœ€è¦è¿›ç¨‹å¤–çš„è®¿é—®ç­‰)ç›´æ¥è®¿é—®ä¼šç»™ä½¿ç”¨è€…ã€æˆ–è€…ç³»ç»Ÿç»“æ„å¸¦æ¥å¾ˆå¤šéº»çƒ¦ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•åœ¨ä¸å¤±å»é€æ˜æ“ä½œå¯¹è±¡çš„åŒæ—¶æ¥ç®¡</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(ä¹)-FaÃ§ade</title>
    <link href="https://blog.hellowei.ga/2021/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F10/"/>
    <id>https://blog.hellowei.ga/2021/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F10/</id>
    <published>2021-11-10T10:36:00.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><p><img src="/img/PatternDesign/10_01.png" alt="åŠ¨æœº"></p><ol><li>ä¸Šè¿°Aæ–¹æ¡ˆçš„é—®é¢˜åœ¨äºç»„ä»¶çš„å®¢æˆ·å’Œç»„ä»¶ä¸­å„ç§å¤æ‚çš„å­ç³»ç»Ÿæœ‰äº†è¿‡å¤šçš„è€¦åˆï¼Œéšç€å¤–éƒ¨å®¢æˆ·ç¨‹åºå’Œå„å­ç³»ç»Ÿçš„æ¼”åŒ–ï¼Œè¿™ç§è¿‡å¤šçš„è€¦åˆé¢ä¸´å¾ˆå¤šå˜åŒ–çš„æŒ‘æˆ˜ã€‚</li><li>å¦‚ä½•ç®€åŒ–å¤–éƒ¨å®¢æˆ·ç¨‹åºå’Œç³»ç»Ÿé—´çš„äº¤äº’æ¥å£?å¦‚ä½•å°†å¤–éƒ¨å®¢æˆ·ç¨‹<br>åºçš„æ¼”åŒ–å’Œå†…éƒ¨å­ç³»ç»Ÿçš„å˜åŒ–ä¹‹é—´çš„ä¾èµ–ç›¸äº’è§£è€¦?</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€-ç»„æ¥å£æä¾›ä¸€ä¸ª**ä¸€è‡´(ç¨³å®š)**çš„ç•Œé¢,FaÃ§adeæ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨(å¤ç”¨)</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/10_02.png" alt="ç»“æ„"></p><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>ä»å®¢æˆ·ç¨‹åºçš„è§’åº¦æ¥çœ‹ï¼ŒFaÃ§adeæ¨¡å¼ç®€åŒ–äº†æ•´ä¸ªç»„ä»¶ç³»ç»Ÿçš„æ¥å£ï¼Œå¯¹äºç»„ä»¶å†…éƒ¨ä¸å¤–éƒ¨å®¢æˆ·ç¨‹åºæ¥è¯´ï¼Œè¾¾åˆ°äº†ä¸€ç§â€œè§£è€¦â€çš„æ•ˆæœï¼Œå†…éƒ¨å­ç³»ç»Ÿçš„ä»»ä½•å˜åŒ–ä¸ä¼šå½±å“åˆ°FaÃ§adeæ¥å£çš„å˜åŒ–ã€‚</li><li>FaÃ§adeè®¾è®¡æ¨¡å¼æ›´æ³¨é‡ä»æ¶æ„çš„å±‚æ¬¡å»çœ‹æ•´ä¸ªç³»ç»Ÿï¼Œè€Œä¸æ˜¯å•ä¸ªç±»çš„å±‚æ¬¡ã€‚FaÃ§adeå¾ˆå¤šæ—¶å€™æ›´æ˜¯ä¸€ç§æ¶æ„è®¾è®¡æ¨¡å¼ã€‚</li><li>FaÃ§adeè®¾è®¡æ¨¡å¼å¹¶éä¸€ä¸ªé›†è£…ç®±ï¼Œå¯ä»¥ä»»æ„åœ°æ”¾è¿›ä»»ä½•å¤šä¸ªå¯¹è±¡ã€‚FaÃ§adeæ¨¡å¼ä¸­ç»„ä»¶çš„å†…éƒ¨åº”è¯¥æ˜¯â€œç›¸äº’è€¦åˆå…³ç³»æ¯”è¾ƒå¤§çš„ä¸€ç³»åˆ—ç»„ä»¶â€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç®€å•çš„åŠŸèƒ½é›†åˆã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/img/PatternDesign/10_01.png&quot; alt=&quot;åŠ¨æœº&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸Šè¿°Aæ–¹æ¡ˆçš„é—®é¢˜åœ¨äºç»„ä»¶çš„å®¢æˆ·å’Œç»„ä»¶ä¸­å„ç§å¤æ‚çš„å­ç³»ç»Ÿæœ‰äº†è¿‡å¤šçš„è€¦åˆï¼Œéšç€å¤–éƒ¨å®¢æˆ·ç¨‹åºå’Œå„å­ç³»ç»Ÿçš„æ¼”</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(å…«)-Flyweight</title>
    <link href="https://blog.hellowei.ga/2021/11/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F09/"/>
    <id>https://blog.hellowei.ga/2021/11/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F09/</id>
    <published>2021-11-08T02:39:41.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶ç³»ç»Ÿé‡‡ç”¨çº¯ç²¹å¯¹è±¡æ–¹æ¡ˆçš„é—®é¢˜åœ¨äºå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ä¼šå¾ˆå¿«å……æ–¥åœ¨ç³»ç»Ÿä¸­ï¼Œä»è€Œå¸¦æ¥å¾ˆé«˜çš„è¿è¡Œæ—¶ä»£ä»·â€”â€”ä¸»è¦æŒ‡å†…å­˜éœ€æ±‚æ–¹é¢çš„ä»£ä»·ã€‚</li><li>åœ¨é¿å…å¤§é‡ç»†ç²’åº¦å¯¹è±¡é—®é¢˜çš„åŒæ—¶ï¼Œè®©å¤–éƒ¨å®¢æˆ·ç¨‹åºä»ç„¶èƒ½å¤Ÿé€æ˜åœ°ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥è¿›è¡Œæ“ä½œ</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/09_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Font</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//unique object key</span></span><br><span class="line">    string key;  </span><br><span class="line">    <span class="comment">//object state</span></span><br><span class="line">    <span class="comment">//....   </span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Font</span>(<span class="keyword">const</span> string&amp; key)&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FontFactory</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    map&lt;string,Font* &gt; fontPool;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Font* <span class="title">GetFont</span><span class="params">(<span class="keyword">const</span> string&amp; key)</span></span>&#123;</span><br><span class="line">        map&lt;string,Font*&gt;::iterator item=fontPool.<span class="built_in">find</span>(key);       </span><br><span class="line">        <span class="keyword">if</span>(item!=footPool.<span class="built_in">end</span>())&#123;</span><br><span class="line">            <span class="keyword">return</span> fontPool[key];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            Font* font = <span class="keyword">new</span> <span class="built_in">Font</span>(key);</span><br><span class="line">            fontPool[key]= font;</span><br><span class="line">            <span class="keyword">return</span> font;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>é¢å‘å¯¹è±¡å¾ˆå¥½åœ°è§£å†³äº†æŠ½è±¡æ€§çš„é—®é¢˜ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªè¿è¡Œåœ¨æœºå™¨ä¸­çš„ç¨‹åºå®ä½“ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¯¹è±¡çš„ä»£ä»·é—®é¢˜ã€‚Flyweightä¸»è¦è§£å†³é¢å‘å¯¹è±¡çš„ä»£ä»·é—®é¢˜ï¼Œä¸€èˆ¬ä¸è§¦åŠé¢å‘å¯¹è±¡çš„æŠ½è±¡æ€§é—®é¢˜ã€‚</li><li>Flyweighté‡‡ç”¨å¯¹è±¡å…±äº«çš„åšæ³•æ¥é™ä½ç³»ç»Ÿä¸­å¯¹è±¡çš„ä¸ªæ•°ï¼Œä»è€Œé™ä½ç»†ç²’åº¦å¯¹è±¡ç»™ç³»ç»Ÿå¸¦æ¥çš„å†…å­˜å‹åŠ›ã€‚åœ¨å…·ä½“å®ç°æ–¹é¢ï¼Œè¦æ³¨æ„å¯¹è±¡çŠ¶æ€çš„å¤„ç†ã€‚</li><li>å¯¹è±¡çš„æ•°é‡å¤ªå¤§ä»è€Œå¯¼è‡´å¯¹è±¡å†…å­˜å¼€é”€åŠ å¤§â€”â€”ä»€ä¹ˆæ ·çš„æ•°é‡æ‰ç®—å¤§?è¿™éœ€è¦æˆ‘ä»¬ä»”ç»†çš„æ ¹æ®å…·ä½“åº”ç”¨æƒ…å†µè¿›è¡Œè¯„ä¼°ï¼Œè€Œä¸èƒ½å‡­ç©ºè‡†æ–­ã€‚</li></ol><p><img src="/img/PatternDesign/PatternDesign09.png" alt="PatternDesign09"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶ç³»ç»Ÿé‡‡ç”¨çº¯ç²¹å¯¹è±¡æ–¹æ¡ˆçš„é—®é¢˜åœ¨äºå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ä¼šå¾ˆå¿«å……æ–¥åœ¨ç³»ç»Ÿä¸­ï¼Œä»è€Œå¸¦æ¥å¾ˆé«˜çš„è¿è¡Œæ—¶ä»£ä»·â€”â€”ä¸»è¦æŒ‡å†…å­˜éœ€æ±‚æ–¹é¢çš„ä»£ä»·ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é¿å…å¤§é‡ç»†ç²’åº¦å¯¹è±¡é—®é¢˜çš„åŒæ—¶ï¼Œè®©å¤–éƒ¨å®¢æˆ·ç¨‹åºä»ç„¶èƒ½å¤Ÿé€æ˜åœ°ä½¿ç”¨é¢å‘</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(ä¸ƒ)- Singleton</title>
    <link href="https://blog.hellowei.ga/2021/11/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F08/"/>
    <id>https://blog.hellowei.ga/2021/11/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F08/</id>
    <published>2021-11-07T14:54:33.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç»å¸¸æœ‰è¿™æ ·ä¸€äº›ç‰¹æ®Šçš„ç±»ï¼Œå¿…é¡»ä¿è¯å®ƒä»¬åœ¨ç³»ç»Ÿä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œæ‰èƒ½ç¡®ä¿å®ƒä»¬çš„é€»è¾‘æ­£ç¡®æ€§ã€ä»¥åŠè‰¯å¥½çš„æ•ˆç‡ã€‚</li><li>ç»•è¿‡å¸¸è§„çš„æ„é€ å™¨ï¼Œæä¾›ä¸€ç§æœºåˆ¶æ¥ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹</li><li>è¿™æ˜¯ç±»è®¾è®¡è€…çš„è´£ä»»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è€…çš„è´£ä»»ã€‚</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/08_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//å•ä¾‹æ¨¡å¼åªèƒ½æœ‰ä¸€ä¸ªç¤ºä¾‹ å› æ­¤éœ€è¦é˜»æ­¢æ‹·è´</span></span><br><span class="line">    <span class="comment">//æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ä¸éœ€è¦</span></span><br><span class="line">    <span class="comment">//æ–°æ ‡å‡†åŠ ä¸Šdeleteå¯ä»¥å®šä¹‰ä¸ºåˆ é™¤æˆ–å®šä¹‰ä¸ºç§æœ‰</span></span><br><span class="line">    <span class="built_in">Singleton</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">static</span> Singleton* m_instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€å˜é‡åˆå§‹åŒ–</span></span><br><span class="line">Singleton* Singleton::m_instance = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹éå®‰å…¨ç‰ˆæœ¬</span></span><br><span class="line"><span class="function">Singleton* <span class="title">Singleton::getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        m_instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m_instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹å®‰å…¨ç‰ˆ,ä½†é”çš„ä»£ä»·è¿‡é«˜</span></span><br><span class="line"><span class="function">Singleton* <span class="title">Singleton::getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Lock lock;</span><br><span class="line">    <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        m_instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m_instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒæ£€æŸ¥é” ï¼Œä½†ç”±äºå†…å­˜è¯»å†™reorderä¸å®‰å…¨</span></span><br><span class="line"><span class="comment">//åªæœ‰ä¸ºç©ºæ‰åŠ é”ï¼Œé”å‰ä¸æ£€æŸ¥ä»£ä»·è¿‡é«˜ï¼Œé”åä¸æ£€æŸ¥çº¿ç¨‹ä¸å®‰å…¨</span></span><br><span class="line"><span class="comment">//ä¸è¦å†ç”¨äº†</span></span><br><span class="line"><span class="function">Singleton* <span class="title">Singleton::getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        Lock lock;</span><br><span class="line">        <span class="keyword">if</span>(m_instance == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            m_instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m_instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//c++11 ç‰ˆæœ¬ä¹‹åçš„è·¨å¹³å°å®ç°</span></span><br><span class="line">std::atomic&lt;Singleton*&gt; Singleton::m_instance;</span><br><span class="line">std::mutex Singleton::m_mutex;</span><br><span class="line"></span><br><span class="line"><span class="function">Singleton* <span class="title">Singleton::getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Singleton* tmp = m_instance.<span class="built_in">load</span>(std::memory_order_relaxed);</span><br><span class="line">    std::<span class="built_in">atomic_thread_fence</span>(std::memory_order_acquire);<span class="comment">//è·å–å†…å­˜fence</span></span><br><span class="line">    <span class="keyword">if</span> (tmp == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(m_mutex)</span></span>;</span><br><span class="line">        tmp = m_instance.<span class="built_in">load</span>(std::memory_order_relaxed);</span><br><span class="line">        <span class="keyword">if</span> (tmp == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            tmp = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">            std::<span class="built_in">atomic_thread_fence</span>(std::memory_order_release);<span class="comment">//é‡Šæ”¾å†…å­˜fence</span></span><br><span class="line">            m_instance.<span class="built_in">store</span>(tmp, std::memory_order_relaxed);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ©ç”¨å±€éƒ¨é™æ€å˜é‡å®ç°ç®€æ´çš„singletonå†™æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//å•ä¾‹æ¨¡å¼åªèƒ½æœ‰ä¸€ä¸ªç¤ºä¾‹ å› æ­¤éœ€è¦é˜»æ­¢æ‹·è´</span></span><br><span class="line">    <span class="comment">//æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ä¸éœ€è¦</span></span><br><span class="line">    <span class="comment">//æ–°æ ‡å‡†åŠ ä¸Šdeleteå¯ä»¥å®šä¹‰ä¸ºåˆ é™¤æˆ–å®šä¹‰ä¸ºç§æœ‰</span></span><br><span class="line">    <span class="built_in">Singleton</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    <span class="function">Singleton&amp; <span class="title">operator</span><span class="params">(<span class="keyword">const</span> Singleton&amp;)</span> </span>= <span class="keyword">delete</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">static</span> Singleton m_instance;</span><br><span class="line">        <span class="keyword">return</span> &amp;m_instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å•çº¿ç¨‹ä¸‹ï¼Œæ­£ç¡®ã€‚</li><li>C++11åŠä»¥åçš„ç‰ˆæœ¬ï¼ˆå¦‚C++14ï¼‰çš„å¤šçº¿ç¨‹ä¸‹ï¼Œæ­£ç¡®ã€‚</li><li>C++11ä¹‹å‰çš„å¤šçº¿ç¨‹ä¸‹ï¼Œä¸ä¸€å®šæ­£ç¡®ã€‚åŸå› åœ¨äºåœ¨C++11ä¹‹å‰çš„æ ‡å‡†ä¸­å¹¶æ²¡æœ‰è§„å®šlocal staticå˜é‡çš„å†…å­˜æ¨¡å‹ã€‚äºæ˜¯ä¹å®ƒå°±æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„äº†ã€‚ä½†æ˜¯åœ¨C++11å´æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ˜¯å› ä¸ºæ–°çš„C++æ ‡å‡†è§„å®šäº†å½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨åˆå§‹åŒ–ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»å¾—ç­‰åˆ°è¯¥åˆå§‹åŒ–å®Œæˆä»¥åæ‰èƒ½è®¿é—®å®ƒã€‚</li></ul><p>ä¸Šè¿°ä½¿ç”¨çš„å†…å­˜åºï¼š</p><p>memory_order_relaxedï¼šæ¾æ•£å†…å­˜åºï¼Œåªç”¨æ¥ä¿è¯å¯¹åŸå­å¯¹è±¡çš„æ“ä½œæ˜¯åŸå­çš„<br>memory_order_acquireï¼šè·å¾—æ“ä½œï¼Œåœ¨è¯»å–æŸåŸå­å¯¹è±¡æ—¶ï¼Œå½“å‰çº¿ç¨‹çš„ä»»ä½•åé¢çš„è¯»å†™æ“ä½œéƒ½ä¸å…è®¸é‡æ’åˆ°è¿™ä¸ªæ“ä½œçš„å‰é¢å»ï¼Œå¹¶ä¸”å…¶ä»–çº¿ç¨‹åœ¨å¯¹åŒä¸€ä¸ªåŸå­å¯¹è±¡é‡Šæ”¾ä¹‹å‰çš„æ‰€æœ‰å†…å­˜å†™å…¥éƒ½åœ¨å½“å‰çº¿ç¨‹å¯è§<br>memory_order_releaseï¼šé‡Šæ”¾æ“ä½œï¼Œåœ¨å†™å…¥æŸåŸå­å¯¹è±¡æ—¶ï¼Œå½“å‰çº¿ç¨‹çš„ä»»ä½•å‰é¢çš„è¯»å†™æ“ä½œéƒ½ä¸å…è®¸é‡æ’åˆ°è¿™ä¸ªæ“ä½œçš„åé¢å»ï¼Œå¹¶ä¸”å½“å‰çº¿ç¨‹çš„æ‰€æœ‰å†…å­˜å†™å…¥éƒ½åœ¨å¯¹åŒä¸€ä¸ªåŸå­å¯¹è±¡è¿›è¡Œè·å–çš„å…¶ä»–çº¿ç¨‹å¯è§</p><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>Singletonæ¨¡å¼ä¸­çš„å®ä¾‹æ„é€ å™¨å¯ä»¥è®¾ç½®ä¸ºprotectedä»¥å…è®¸å­ç±»æ´¾ç”Ÿã€‚</li><li>Singletonæ¨¡å¼ä¸€èˆ¬ä¸è¦æ”¯æŒæ‹·è´æ„é€ å‡½æ•°å’ŒCloneæ¥å£ï¼Œå› ä¸ºè¿™æœ‰å¯èƒ½å¯¼è‡´å¤šä¸ªå¯¹è±¡å®ä¾‹ï¼Œä¸Singletonæ¨¡å¼çš„åˆè¡·è¿èƒŒã€‚</li><li>å¦‚ä½•å®ç°å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å®‰å…¨çš„Singleton?æ³¨æ„å¯¹åŒæ£€æŸ¥é”çš„æ­£ç¡®å®ç°ã€‚</li></ol><p><img src="/img/PatternDesign/PatternDesign08.png" alt="PatternDesign08"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç»å¸¸æœ‰è¿™æ ·ä¸€äº›ç‰¹æ®Šçš„ç±»ï¼Œå¿…é¡»ä¿è¯å®ƒä»¬åœ¨ç³»ç»Ÿä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œæ‰èƒ½ç¡®ä¿å®ƒä»¬çš„é€»è¾‘æ­£ç¡®æ€§ã€ä»¥åŠè‰¯å¥½çš„æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;ç»•è¿‡å¸¸è§„çš„æ„é€ å™¨ï¼Œæä¾›ä¸€ç§æœºåˆ¶æ¥ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹&lt;/li&gt;
&lt;li&gt;è¿™æ˜¯</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼(å…­)- Factory</title>
    <link href="https://blog.hellowei.ga/2021/11/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F07/"/>
    <id>https://blog.hellowei.ga/2021/11/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F07/</id>
    <published>2021-11-07T11:28:09.000Z</published>
    <updated>2022-08-16T13:34:42.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾è®¡åŠ¨æœº">è®¾è®¡åŠ¨æœº</h2><ol><li>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­,ç»å¸¸é¢ä¸´ç€åˆ›å»ºå¯¹è±¡çš„å·¥ä½œ;ç”±äºéœ€æ±‚çš„å˜åŒ–,éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„å…·ä½“ç±»å‹ç»å¸¸å˜åŒ–</li><li>å¦‚ä½•åº”å¯¹è¿™ç§å˜åŒ–?å¦‚ä½•ç»•è¿‡å¸¸è§„çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•(new)ï¼Œæä¾›ä¸€ç§â€œå°è£…æœºåˆ¶&quot;æ¥é¿å…å®¢æˆ·ç¨‹åºå’Œè¿™ç§â€œå…·ä½“å¯¹è±¡åˆ›å»ºå·¥ä½œ&quot;çš„ç´§è€¦åˆ?</li></ol><h2 id="å®šä¹‰">å®šä¹‰</h2><blockquote><p>å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚Factory Methodä½¿å¾—ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–<strong>å»¶è¿Ÿ</strong>(ç›®çš„:è§£è€¦ï¼Œæ‰‹æ®µï¸°è™šå‡½æ•°)åˆ°å­ç±»ã€‚</p></blockquote><h2 id="ç»“æ„">ç»“æ„</h2><p><img src="/img/PatternDesign/07_01.png" alt="ç»“æ„"></p><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//productæŠ½è±¡ç±» </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ISplitter</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">split</span><span class="params">()</span></span>=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">ISplitter</span>()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Creatorå·¥å‚åŸºç±» </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SplitterFactory</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> ISplitter* <span class="title">CreateSplitter</span><span class="params">()</span></span>=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">SplitterFactory</span>()&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainForm</span> :</span> <span class="keyword">public</span> Form</span><br><span class="line">&#123;</span><br><span class="line">    SplitterFactory*  factory;<span class="comment">//å·¥å‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MainForm</span>(SplitterFactory*  factory)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;factory=factory;</span><br><span class="line">    &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Button1_Click</span><span class="params">()</span></span>&#123;   </span><br><span class="line">ISplitter * splitter=</span><br><span class="line">            factory-&gt;<span class="built_in">CreateSplitter</span>(); <span class="comment">//å¤šæ€new    </span></span><br><span class="line">        splitter-&gt;<span class="built_in">split</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨å®Œæˆäº§å“ç±»å’Œå¯¹åº”çš„å·¥å‚ç±»åï¼Œä¾¿å¯åœ¨<code>MainForm</code>ä¸­åº”ç”¨ã€‚å¯ä»¥ä¿è¯ç¼–è¯‘æ—¶åªä¾èµ–ä¸äº§å“åŸºç±»å’Œå·¥å‚å•ç±»ã€‚å­ç±»å¯ä»¥ä¾æ®éœ€æ±‚éšæ—¶å®ç°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç±»çš„å®ç°</span></span><br><span class="line"><span class="comment">//å…·ä½“product</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinarySplitter</span> :</span> <span class="keyword">public</span> ISplitter&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TxtSplitter</span>:</span> <span class="keyword">public</span> ISplitter&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//å…·ä½“å·¥å‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinarySplitterFactory</span>:</span> <span class="keyword">public</span> SplitterFactory&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> ISplitter* <span class="title">CreateSplitter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">BinarySplitter</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TxtSplitterFactory</span>:</span> <span class="keyword">public</span> SplitterFactory&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> ISplitter* <span class="title">CreateSplitter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">TxtSplitter</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><ol><li>Factory Methodæ¨¡å¼ç”¨äºéš”ç¦»ç±»å¯¹è±¡çš„ä½¿ç”¨è€…å’Œå…·ä½“ç±»å‹ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚é¢å¯¹ä¸€ä¸ªç»å¸¸å˜åŒ–çš„å…·ä½“ç±»å‹ï¼Œç´§è€¦åˆå…³ç³»(new)ä¼šå¯¼è‡´è½¯ä»¶çš„è„†å¼±ã€‚</li><li>Factory Methodæ¨¡å¼é€šè¿‡é¢å‘å¯¹è±¡çš„æ‰‹æ³•ï¼Œå°†æ‰€è¦åˆ›å»ºçš„å…·ä½“å¯¹è±¡å·¥ä½œå»¶è¿Ÿåˆ°å­ç±»ï¼Œä»è€Œå®ç°ä¸€ç§æ‰©å±•ï¼ˆè€Œéæ›´æ”¹)çš„ç­–ç•¥ï¼Œè¾ƒå¥½åœ°è§£å†³äº†è¿™ç§ç´§è€¦åˆå…³ç³»ã€‚</li><li>Factory Methodæ¨¡å¼è§£å†³â€œå•ä¸ªå¯¹è±¡&quot;çš„éœ€æ±‚å˜åŒ–ã€‚ç¼ºç‚¹åœ¨äºè¦æ±‚åˆ›å»ºæ–¹æ³•/å‚æ•°ç›¸åŒã€‚</li></ol><p><img src="/img/PatternDesign/PatternDesign07.png" alt="PatternDesign07"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è®¾è®¡åŠ¨æœº&quot;&gt;è®¾è®¡åŠ¨æœº&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è½¯ä»¶ç³»ç»Ÿä¸­,ç»å¸¸é¢ä¸´ç€åˆ›å»ºå¯¹è±¡çš„å·¥ä½œ;ç”±äºéœ€æ±‚çš„å˜åŒ–,éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„å…·ä½“ç±»å‹ç»å¸¸å˜åŒ–&lt;/li&gt;
&lt;li&gt;å¦‚ä½•åº”å¯¹è¿™ç§å˜åŒ–?å¦‚ä½•ç»•è¿‡å¸¸è§„çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•(new)ï¼Œæä¾›ä¸€ç§â€œå°è£…æœºåˆ¶&amp;quot;æ¥é¿å…å®¢æˆ·ç¨‹åºå’Œè¿™ç§</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.hellowei.ga/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
